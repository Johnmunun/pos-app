ğŸ“˜ PROJECT RULES â€” SAAS POS WEB (DDD + Roles dynamiques)
1ï¸âƒ£ PRINCIPES GÃ‰NÃ‰RAUX (NON NÃ‰GOCIABLES)

Architecture Domain Driven Design (DDD) obligatoire

SÃ©paration stricte :

Domain = mÃ©tier pur

Application = use cases

Infrastructure = Laravel / DB / Eloquent

UI = React + Tailwind

Aucune logique mÃ©tier dans :

Controllers

Requests

React components

2ï¸âƒ£ GESTION DES RÃ”LES & PERMISSIONS (RÃˆGLE CLÃ‰)
ğŸ¯ Principe

Les rÃ´les sont crÃ©Ã©s depuis lâ€™interface admin

Les permissions ne sont PAS codÃ©es en dur

Les permissions sont dÃ©finies dans :

un fichier YAML ou TXT

uploadÃ© ou collÃ© dans lâ€™interface admin

Un bouton â€œGÃ©nÃ©rer les permissionsâ€ :

lit le fichier

dÃ©tecte les nouvelles permissions

les insÃ¨re automatiquement en base de donnÃ©es

sans supprimer les anciennes

3ï¸âƒ£ SOURCE DE VÃ‰RITÃ‰ DES PERMISSIONS

Le fichier YAML/TXT est la source mÃ©tier

La base de donnÃ©es est la source dâ€™exÃ©cution

Le code ne doit jamais contenir de permissions en dur

4ï¸âƒ£ FORMAT DU FICHIER DE PERMISSIONS (EXEMPLE)
sales:
  - sale.create
  - sale.view
  - sale.refund

products:
  - product.create
  - product.update
  - product.delete

inventory:
  - stock.in
  - stock.out


RÃ¨gles :

format hiÃ©rarchique lisible

permission = string unique

aucune logique conditionnelle dans le fichier

5ï¸âƒ£ COMPORTEMENT DU BOUTON â€œGÃ‰NÃ‰RER PERMISSIONSâ€

Lors du clic :

Charger le fichier YAML/TXT

Parser toutes les permissions

Comparer avec celles existantes en DB

InsÃ©rer uniquement les permissions manquantes

Logger les nouvelles permissions crÃ©Ã©es

Ne jamais supprimer automatiquement une permission existante

6ï¸âƒ£ RÃ”LES (DYNAMIQUES)

Un rÃ´le est crÃ©Ã© depuis lâ€™interface admin

Un rÃ´le peut :

recevoir plusieurs permissions

Ãªtre modifiÃ© sans redÃ©ploiement

Le ROOT peut :

crÃ©er / modifier / supprimer des rÃ´les

assigner des rÃ´les Ã  nâ€™importe quel utilisateur

Les merchants ne peuvent gÃ©rer que leurs utilisateurs

7ï¸âƒ£ HIÃ‰RARCHIE DES ACCÃˆS

ROOT :

accÃ¨s global Ã  toutes les boutiques

gestion des tenants

gestion des rÃ´les et permissions

MERCHANT :

accÃ¨s limitÃ© Ã  ses boutiques

gestion de ses sellers / cashiers

CASHIER / SELLER :

accÃ¨s strictement contrÃ´lÃ© par permissions

8ï¸âƒ£ CONTRÃ”LE DES ACCÃˆS (OBLIGATOIRE)

Toute action sensible doit vÃ©rifier :

le rÃ´le

la permission

Aucune vÃ©rification directe dans les controllers

Les contrÃ´les passent par :

Policies mÃ©tier

Use Cases applicatifs

9ï¸âƒ£ INTERDICTIONS ABSOLUES ğŸš«

âŒ Pas de permissions hardcodÃ©es

âŒ Pas de Gate::define() avec strings en dur

âŒ Pas de logique dâ€™accÃ¨s dans React

âŒ Pas de suppression automatique de permissions

âŒ Pas de dÃ©pendance Laravel dans le Domain

ğŸ”Ÿ OBJECTIF FINAL

CrÃ©er un POS SaaS professionnel, capable de :

Ã©voluer sans modifier le code

ajouter des permissions sans dÃ©ploiement

servir plusieurs types de commerces

Ãªtre monÃ©tisable Ã  grande Ã©chelle en Afrique

âœ… RÃ‰SULTAT ATTENDU POUR CURSOR

GÃ©nÃ©rer du code :

propre

scalable

testable

Respecter strictement DDD