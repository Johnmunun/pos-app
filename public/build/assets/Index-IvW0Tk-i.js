import{u as N,r as h,j as e,H as k,a as w}from"./app-DZtTOeIE.js";import{A as v,y as C,D as _,d as A,b as D,e as P,t as S}from"./AppLayout-Bwi93PbD.js";import{C as s,a,b as r,c as l}from"./card-vlabImcc.js";import{B as R}from"./Button-BTh3B2Uw.js";import{I as p}from"./Input--MgEb_Nf.js";import{L as g}from"./Label-CgyD4LXG.js";import{f as F}from"./currency-C0RJmSMb.js";import{R as T}from"./refresh-cw-BgZ2dbVR.js";import"./createLucideIcon-CC-qNPM4.js";import"./shield-x-BMsLrHBM.js";import"./x-CXs6YGQp.js";import"./user-cog-HidSeQFU.js";import"./Dropdown-BcljNwe3.js";import"./transition-DLc2G3IG.js";import"./arrow-left-B06KhL06.js";import"./loader-circle-DAnXRmQH.js";import"./FlashMessages-DVzYx1sH.js";function Y({report:i,filters:o}){const{shop:y}=N().props,j=y?.currency||"CDF",x=t=>F(t,j),[m,b]=h.useState(o?.from||""),[n,f]=h.useState(o?.to||""),u=t=>{t.preventDefault(),w.get(route("pharmacy.reports.index"),{from:m,to:n},{preserveState:!0})},d=i?.sales||{},c=i?.stock||{};return e.jsxs(v,{header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-100 leading-tight",children:"Rapports Pharmacy"}),children:[e.jsx(k,{title:"Rapports Pharmacy"}),e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs(s,{className:"mb-6 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsx(a,{children:e.jsxs(r,{className:"text-base flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4"}),"Période"]})}),e.jsxs(l,{children:[e.jsxs("form",{onSubmit:u,className:"flex flex-wrap items-end gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"from",children:"Du"}),e.jsx(p,{id:"from",type:"date",value:m,onChange:t=>b(t.target.value),className:"max-w-[180px]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"to",children:"Au"}),e.jsx(p,{id:"to",type:"date",value:n,onChange:t=>f(t.target.value),className:"max-w-[180px]"})]}),e.jsxs(R,{type:"submit",size:"sm",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Actualiser"]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Données mises en cache 5 min pour les performances."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs(s,{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"Chiffre d'affaires"}),e.jsx(_,{className:"h-4 w-4 text-green-500 dark:text-green-400"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:x(d.total||0)}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Période sélectionnée"})]})]}),e.jsxs(s,{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"Nombre de ventes"}),e.jsx(A,{className:"h-4 w-4 text-blue-500 dark:text-blue-400"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.count??0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Ventes complétées"})]})]}),e.jsxs(s,{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"Valeur du stock"}),e.jsx(D,{className:"h-4 w-4 text-amber-500 dark:text-amber-400"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:x(c.total_value||0)}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[c.product_count??0," produits actifs"]})]})]}),e.jsxs(s,{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"Stock bas"}),e.jsx(P,{className:"h-4 w-4 text-orange-500 dark:text-orange-400"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:c.low_stock_count??0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Produits à réapprovisionner"})]})]})]}),d.by_day&&d.by_day.length>0&&e.jsxs(s,{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsx(a,{children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5"}),"Ventes par jour"]})}),e.jsx(l,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-slate-700",children:[e.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-700 dark:text-gray-200",children:"Date"}),e.jsx("th",{className:"text-right py-2 px-3 font-medium text-gray-700 dark:text-gray-200",children:"Ventes"}),e.jsx("th",{className:"text-right py-2 px-3 font-medium text-gray-700 dark:text-gray-200",children:"CA"})]})}),e.jsx("tbody",{children:d.by_day.map(t=>e.jsxs("tr",{className:"border-b border-gray-100 dark:border-slate-800",children:[e.jsx("td",{className:"py-2 px-3 text-gray-900 dark:text-white",children:t.date}),e.jsx("td",{className:"py-2 px-3 text-right text-gray-700 dark:text-gray-300",children:t.count}),e.jsx("td",{className:"py-2 px-3 text-right font-medium text-gray-900 dark:text-white",children:x(t.total)})]},t.date))})]})})})]})]})})]})}export{Y as default};
