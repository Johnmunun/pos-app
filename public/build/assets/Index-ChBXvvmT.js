import{r as l,j as e,H as R,L as T,a as i}from"./app-B8F_Smya.js";import{A as V,g as m,P as C,l as H,m as O,C as A,b as $,x as q,f as G,E as U,s as X}from"./AppLayout-Cyrikcek.js";import{C as S,a as _,b as I,c as F}from"./card-DwWU2KFG.js";import{B as s}from"./Button-BSACjJaD.js";import{I as g}from"./Input-DyZz_-qK.js";import{L as d}from"./Label-Dhk_jhe5.js";import{C as J}from"./x-Ce9nIuKt.js";import{C as K}from"./loader-circle-5vrT9r4x.js";import"./createLucideIcon-NKf32Z79.js";import"./shield-x-CXAQmM6w.js";import"./user-cog-Cgo5DVwg.js";import"./Dropdown-CXpnj_1U.js";import"./transition-L_iZ831R.js";import"./arrow-left-uFeYT1yE.js";import"./refresh-cw-BeeT9s1l.js";import"./FlashMessages-CHIUDfR7.js";const D={draft:{label:"Brouillon",color:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",icon:X},in_progress:{label:"En cours",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",icon:K},validated:{label:"Validé",color:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",icon:J},cancelled:{label:"Annulé",color:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",icon:A}};function oe({inventories:x,depots:E=[],filters:r={},pagination:a,permissions:n}){const[h,p]=l.useState(r.reference||""),[u,y]=l.useState(r.status||""),[c,b]=l.useState(r.depot_id??""),[j,k]=l.useState(r.from||""),[f,N]=l.useState(r.to||""),L=t=>{t.preventDefault(),i.get(route("pharmacy.inventories.index"),{reference:h||void 0,status:u||void 0,depot_id:c||void 0,from:j||void 0,to:f||void 0},{preserveState:!0,preserveScroll:!0})},P=()=>{p(""),y(""),b(""),k(""),N(""),i.get(route("pharmacy.inventories.index"))},v=t=>{i.get(route("pharmacy.inventories.index"),{...r,page:t},{preserveState:!0,preserveScroll:!0})},w=()=>{const t=c?{depot_id:c}:{};i.post(route("pharmacy.inventories.store"),t)},z=t=>{const o=D[t]||D.draft,B=o.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${o.color}`,children:[e.jsx(B,{className:"h-3.5 w-3.5"}),o.label]})};return e.jsxs(V,{header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-100 leading-tight",children:"Inventaires"}),children:[e.jsx(R,{title:"Inventaires"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(m,{className:"h-7 w-7 text-amber-500"}),"Inventaires physiques"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Gérez vos inventaires de stock et contrôlez les écarts"})]}),n?.create&&e.jsxs(s,{onClick:w,className:"bg-amber-500 hover:bg-amber-600 text-white",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Nouvel inventaire"]})]}),e.jsxs(S,{className:"mb-6 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsx(_,{children:e.jsxs(I,{className:"flex items-center text-gray-900 dark:text-white",children:[e.jsx(H,{className:"h-5 w-5 mr-2 text-amber-500"}),"Filtres"]})}),e.jsx(F,{children:e.jsxs("form",{onSubmit:L,className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"reference",className:"text-gray-700 dark:text-gray-300",children:"Référence"}),e.jsx(g,{id:"reference",placeholder:"INV-...",value:h,onChange:t=>p(t.target.value),className:"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"status",className:"text-gray-700 dark:text-gray-300",children:"Statut"}),e.jsxs("select",{id:"status",value:u,onChange:t=>y(t.target.value),className:"w-full h-10 rounded-md border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 px-3 focus:outline-none focus:ring-2 focus:ring-amber-500",children:[e.jsx("option",{value:"",children:"Tous"}),e.jsx("option",{value:"draft",children:"Brouillon"}),e.jsx("option",{value:"in_progress",children:"En cours"}),e.jsx("option",{value:"validated",children:"Validé"}),e.jsx("option",{value:"cancelled",children:"Annulé"})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"depot_id",className:"text-gray-700 dark:text-gray-300",children:"Dépôt"}),e.jsxs("select",{id:"depot_id",value:c,onChange:t=>b(t.target.value),className:"w-full h-10 rounded-md border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 px-3 focus:outline-none focus:ring-2 focus:ring-amber-500",children:[e.jsx("option",{value:"",children:"Tous les dépôts"}),(E||[]).map(t=>e.jsxs("option",{value:t.id,children:[t.name," ",t.code?`(${t.code})`:""]},t.id))]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"from",className:"text-gray-700 dark:text-gray-300",children:"Du"}),e.jsx(g,{id:"from",type:"date",value:j,onChange:t=>k(t.target.value),className:"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"to",className:"text-gray-700 dark:text-gray-300",children:"Au"}),e.jsx(g,{id:"to",type:"date",value:f,onChange:t=>N(t.target.value),className:"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsxs(s,{type:"submit",className:"bg-amber-500 hover:bg-amber-600 text-white flex-1",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Filtrer"]}),e.jsx(s,{type:"button",variant:"outline",onClick:P,className:"border-gray-300 dark:border-slate-600",children:e.jsx(A,{className:"h-4 w-4"})})]})]})})]}),e.jsxs(S,{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsx(_,{children:e.jsxs(I,{className:"flex items-center text-gray-900 dark:text-white",children:[e.jsx(m,{className:"h-5 w-5 mr-2 text-blue-500"}),"Liste des inventaires (",a?.total??x.length,")"]})}),e.jsx(F,{children:x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(m,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Aucun inventaire trouvé"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:Object.keys(r).length>0?"Essayez de modifier vos filtres":"Commencez par créer un nouvel inventaire"}),n?.create&&Object.keys(r).length===0&&e.jsxs(s,{onClick:w,className:"bg-amber-500 hover:bg-amber-600 text-white",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Créer un inventaire"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-slate-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Référence"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Dépôt"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Statut"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Produits"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Créé le"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Par"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-gray-200 dark:divide-slate-700",children:x.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.reference}),t.validated_at&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Validé le ",t.validated_at]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.depot?e.jsxs("span",{className:"inline-flex items-center gap-1 text-sm text-gray-700 dark:text-gray-300",children:[e.jsx($,{className:"h-4 w-4 text-amber-500"}),t.depot.name,t.depot.code&&e.jsxs("span",{className:"text-xs text-gray-500",children:["(",t.depot.code,")"]})]}):e.jsx("span",{className:"text-xs text-gray-400",children:"—"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:z(t.status)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300",children:[t.items_count," produit(s)"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-700 dark:text-gray-300",children:[e.jsx(q,{className:"h-4 w-4 mr-1.5 text-gray-400"}),t.created_at]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-700 dark:text-gray-300",children:[e.jsx(G,{className:"h-4 w-4 mr-1.5 text-gray-400"}),t.creator?.name??"Inconnu"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n?.view&&e.jsxs(T,{href:route("pharmacy.inventories.show",t.id),className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium rounded-md bg-blue-500 hover:bg-blue-600 text-white transition-colors",children:[e.jsx(U,{className:"h-4 w-4"}),"Voir"]})})]},t.id))})]})})})]}),a&&a.last_page>1&&e.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{children:["Affichage de ",e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a.from})," à"," ",e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a.to})," sur"," ",e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a.total})," inventaire(s)"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(s,{variant:"outline",size:"sm",disabled:a.current_page<=1,onClick:()=>v(a.current_page-1),className:"border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-200",children:"Précédent"}),e.jsx(s,{variant:"outline",size:"sm",disabled:a.current_page>=a.last_page,onClick:()=>v(a.current_page+1),className:"border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-200",children:"Suivant"})]})]})]})})]})}export{oe as default};
