import{r as o,j as e,H as C,a as F}from"./app-B8F_Smya.js";import{A as D,h as b,F as A,i as j,j as P,k as T,D as E,e as S}from"./AppLayout-Cyrikcek.js";import{C as a,a as s,b as l,c as d}from"./card-DwWU2KFG.js";import{B as y}from"./Button-BSACjJaD.js";import{I as u}from"./Input-DyZz_-qK.js";import{f as B}from"./currency-CAle3Gff.js";import"./createLucideIcon-NKf32Z79.js";import"./shield-x-CXAQmM6w.js";import"./x-Ce9nIuKt.js";import"./user-cog-Cgo5DVwg.js";import"./Dropdown-CXpnj_1U.js";import"./transition-L_iZ831R.js";import"./arrow-left-uFeYT1yE.js";import"./loader-circle-5vrT9r4x.js";import"./refresh-cw-BeeT9s1l.js";import"./FlashMessages-CHIUDfR7.js";function Y({dashboard:t,filters:c}){const f=t?.currency||"CDF",[x,m]=o.useState(c?.from||""),[n,g]=o.useState(c?.to||"");o.useEffect(()=>{m(c?.from||""),g(c?.to||"")},[c?.from,c?.to]);const N=r=>{r.preventDefault(),F.get(route("finance.dashboard"),{from:x||void 0,to:n||void 0},{preserveState:!0})},i=r=>B(r||0,f),k=t?.total_revenue??0,v=t?.total_expenses??0,w=t?.gross_profit??0,_=t?.margin_percent??0,h=t?.top_10_profitable_products||[],p=t?.low_margin_products||[];return e.jsxs(D,{children:[e.jsx(C,{title:"Dashboard Finance"}),e.jsxs("div",{className:"container mx-auto py-6 px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2 text-gray-900 dark:text-gray-100",children:[e.jsx(b,{className:"h-6 w-6 text-emerald-500"}),"Dashboard Finance"]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Vue d'ensemble des revenus, dépenses et bénéfices."})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:e.jsxs(y,{type:"button",variant:"outline",onClick:()=>window.open(route("finance.dashboard.export.pdf",{from:x||void 0,to:n||void 0}),"_blank","noopener,noreferrer"),className:"border-gray-300 dark:border-slate-600",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Export PDF"]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:e.jsxs(a,{className:"md:col-span-3 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsx(s,{children:e.jsxs(l,{className:"text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5 text-emerald-500"}),"Période d'analyse"]})}),e.jsx(d,{children:e.jsxs("form",{onSubmit:N,className:"flex flex-col md:flex-row items-end gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"from",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Du"}),e.jsx(u,{id:"from",type:"date",value:x,onChange:r=>m(r.target.value),className:"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"to",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Au"}),e.jsx(u,{id:"to",type:"date",value:n,onChange:r=>g(r.target.value),className:"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-gray-100"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(y,{type:"submit",className:"bg-emerald-600 hover:bg-emerald-700 text-white",children:"Filtrer"})})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs(a,{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsx(s,{className:"pb-2",children:e.jsx(l,{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Total revenus"})}),e.jsxs(d,{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:i(k)})}),e.jsx(P,{className:"h-8 w-8 text-emerald-500"})]})]}),e.jsxs(a,{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsx(s,{className:"pb-2",children:e.jsx(l,{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Total dépenses"})}),e.jsxs(d,{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:i(v)})}),e.jsx(T,{className:"h-8 w-8 text-red-500"})]})]}),e.jsxs(a,{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsx(s,{className:"pb-2",children:e.jsx(l,{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Bénéfice brut"})}),e.jsxs(d,{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:i(w)})}),e.jsx(E,{className:"h-8 w-8 text-emerald-500"})]})]}),e.jsxs(a,{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsx(s,{className:"pb-2",children:e.jsx(l,{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Marge bénéficiaire"})}),e.jsxs(d,{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:[_.toFixed(2),"%"]})}),e.jsx(j,{className:"h-8 w-8 text-indigo-500"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs(a,{className:"lg:col-span-2 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsx(s,{children:e.jsxs(l,{className:"flex items-center gap-2 text-gray-900 dark:text-gray-100",children:[e.jsx(b,{className:"h-5 w-5 text-emerald-500"}),"Top 10 produits les plus rentables"]})}),e.jsx(d,{children:h.length===0?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Aucune donnée de vente pour la période sélectionnée."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-slate-700",children:[e.jsx("th",{className:"py-2 pr-4",children:"Produit"}),e.jsx("th",{className:"py-2 pr-4 text-right",children:"Qté vendue"}),e.jsx("th",{className:"py-2 pr-4 text-right",children:"Revenus"}),e.jsx("th",{className:"py-2 pr-4 text-right",children:"Bénéfice"}),e.jsx("th",{className:"py-2 pr-4 text-right",children:"Marge %"})]})}),e.jsx("tbody",{children:h.map(r=>e.jsxs("tr",{className:"border-b border-gray-100 dark:border-slate-800",children:[e.jsx("td",{className:"py-2 pr-4 text-gray-900 dark:text-gray-100",children:r.product_name}),e.jsx("td",{className:"py-2 pr-4 text-right text-gray-900 dark:text-gray-100",children:r.quantity_sold}),e.jsx("td",{className:"py-2 pr-4 text-right text-gray-900 dark:text-gray-100",children:i(r.revenue)}),e.jsx("td",{className:"py-2 pr-4 text-right text-gray-900 dark:text-gray-100",children:i(r.profit)}),e.jsxs("td",{className:"py-2 pr-4 text-right text-gray-900 dark:text-gray-100",children:[r.margin_percent.toFixed(2),"%"]})]},r.product_id))})]})})})]}),e.jsxs(a,{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsx(s,{children:e.jsxs(l,{className:"flex items-center gap-2 text-gray-900 dark:text-gray-100",children:[e.jsx(S,{className:"h-5 w-5 text-amber-500"}),"Produits à faible marge"]})}),e.jsx(d,{children:p.length===0?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Aucun produit avec une marge < 10% sur la période."}):e.jsx("ul",{className:"space-y-2 text-sm",children:p.map(r=>e.jsxs("li",{className:"flex items-center justify-between border-b border-gray-100 dark:border-slate-800 pb-1",children:[e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:r.product_name}),e.jsxs("span",{className:"text-xs font-medium text-amber-600 dark:text-amber-400",children:[r.margin_percent.toFixed(2),"% · ",i(r.revenue)]})]},r.product_id))})})]})]})]})]})}export{Y as default};
