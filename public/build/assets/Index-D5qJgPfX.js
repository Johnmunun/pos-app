import{r as l,j as e,H as B,L as D,a as d}from"./app-DZtTOeIE.js";import{A as P,g as o,P as N,F as R,h as V,C as I,n as T,f as H,E as O,m as q}from"./AppLayout-Bwi93PbD.js";import{C as w,a as C,b as S,c as _}from"./card-vlabImcc.js";import{B as s}from"./Button-BTh3B2Uw.js";import{I as m}from"./Input--MgEb_Nf.js";import{L as i}from"./Label-CgyD4LXG.js";import{C as G}from"./x-CXs6YGQp.js";import{C as U}from"./loader-circle-DAnXRmQH.js";import"./createLucideIcon-CC-qNPM4.js";import"./shield-x-BMsLrHBM.js";import"./user-cog-HidSeQFU.js";import"./Dropdown-BcljNwe3.js";import"./transition-DLc2G3IG.js";import"./arrow-left-B06KhL06.js";import"./refresh-cw-BgZ2dbVR.js";import"./FlashMessages-DVzYx1sH.js";const F={draft:{label:"Brouillon",color:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",icon:q},in_progress:{label:"En cours",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",icon:U},validated:{label:"Validé",color:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",icon:G},cancelled:{label:"Annulé",color:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",icon:I}};function ie({inventories:c,filters:r={},pagination:a,permissions:x}){const[h,g]=l.useState(r.reference||""),[u,p]=l.useState(r.status||""),[y,b]=l.useState(r.from||""),[j,f]=l.useState(r.to||""),A=t=>{t.preventDefault(),d.get(route("pharmacy.inventories.index"),{reference:h||void 0,status:u||void 0,from:y||void 0,to:j||void 0},{preserveState:!0,preserveScroll:!0})},E=()=>{g(""),p(""),b(""),f(""),d.get(route("pharmacy.inventories.index"))},k=t=>{d.get(route("pharmacy.inventories.index"),{...r,page:t},{preserveState:!0,preserveScroll:!0})},v=()=>{d.post(route("pharmacy.inventories.store"))},L=t=>{const n=F[t]||F.draft,z=n.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${n.color}`,children:[e.jsx(z,{className:"h-3.5 w-3.5"}),n.label]})};return e.jsxs(P,{header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-100 leading-tight",children:"Inventaires"}),children:[e.jsx(B,{title:"Inventaires"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(o,{className:"h-7 w-7 text-amber-500"}),"Inventaires physiques"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Gérez vos inventaires de stock et contrôlez les écarts"})]}),x?.create&&e.jsxs(s,{onClick:v,className:"bg-amber-500 hover:bg-amber-600 text-white",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Nouvel inventaire"]})]}),e.jsxs(w,{className:"mb-6 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsx(C,{children:e.jsxs(S,{className:"flex items-center text-gray-900 dark:text-white",children:[e.jsx(R,{className:"h-5 w-5 mr-2 text-amber-500"}),"Filtres"]})}),e.jsx(_,{children:e.jsxs("form",{onSubmit:A,className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"reference",className:"text-gray-700 dark:text-gray-300",children:"Référence"}),e.jsx(m,{id:"reference",placeholder:"INV-...",value:h,onChange:t=>g(t.target.value),className:"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"status",className:"text-gray-700 dark:text-gray-300",children:"Statut"}),e.jsxs("select",{id:"status",value:u,onChange:t=>p(t.target.value),className:"w-full h-10 rounded-md border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 px-3 focus:outline-none focus:ring-2 focus:ring-amber-500",children:[e.jsx("option",{value:"",children:"Tous"}),e.jsx("option",{value:"draft",children:"Brouillon"}),e.jsx("option",{value:"in_progress",children:"En cours"}),e.jsx("option",{value:"validated",children:"Validé"}),e.jsx("option",{value:"cancelled",children:"Annulé"})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"from",className:"text-gray-700 dark:text-gray-300",children:"Du"}),e.jsx(m,{id:"from",type:"date",value:y,onChange:t=>b(t.target.value),className:"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"to",className:"text-gray-700 dark:text-gray-300",children:"Au"}),e.jsx(m,{id:"to",type:"date",value:j,onChange:t=>f(t.target.value),className:"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsxs(s,{type:"submit",className:"bg-amber-500 hover:bg-amber-600 text-white flex-1",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Filtrer"]}),e.jsx(s,{type:"button",variant:"outline",onClick:E,className:"border-gray-300 dark:border-slate-600",children:e.jsx(I,{className:"h-4 w-4"})})]})]})})]}),e.jsxs(w,{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsx(C,{children:e.jsxs(S,{className:"flex items-center text-gray-900 dark:text-white",children:[e.jsx(o,{className:"h-5 w-5 mr-2 text-blue-500"}),"Liste des inventaires (",a?.total??c.length,")"]})}),e.jsx(_,{children:c.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(o,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Aucun inventaire trouvé"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:Object.keys(r).length>0?"Essayez de modifier vos filtres":"Commencez par créer un nouvel inventaire"}),x?.create&&Object.keys(r).length===0&&e.jsxs(s,{onClick:v,className:"bg-amber-500 hover:bg-amber-600 text-white",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Créer un inventaire"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-slate-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Référence"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Statut"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Produits"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Créé le"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Par"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-gray-200 dark:divide-slate-700",children:c.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.reference}),t.validated_at&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Validé le ",t.validated_at]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:L(t.status)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300",children:[t.items_count," produit(s)"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-700 dark:text-gray-300",children:[e.jsx(T,{className:"h-4 w-4 mr-1.5 text-gray-400"}),t.created_at]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-700 dark:text-gray-300",children:[e.jsx(H,{className:"h-4 w-4 mr-1.5 text-gray-400"}),t.creator?.name??"Inconnu"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x?.view&&e.jsxs(D,{href:route("pharmacy.inventories.show",t.id),className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium rounded-md bg-blue-500 hover:bg-blue-600 text-white transition-colors",children:[e.jsx(O,{className:"h-4 w-4"}),"Voir"]})})]},t.id))})]})})})]}),a&&a.last_page>1&&e.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{children:["Affichage de ",e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a.from})," à"," ",e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a.to})," sur"," ",e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a.total})," inventaire(s)"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(s,{variant:"outline",size:"sm",disabled:a.current_page<=1,onClick:()=>k(a.current_page-1),className:"border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-200",children:"Précédent"}),e.jsx(s,{variant:"outline",size:"sm",disabled:a.current_page>=a.last_page,onClick:()=>k(a.current_page+1),className:"border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-200",children:"Suivant"})]})]})]})})]})}export{ie as default};
