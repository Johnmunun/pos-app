import{r as i,j as e,H as b,a as m,L as k}from"./app-3PKVeuQh.js";import{A as w,F as _,z as C}from"./AppLayout-DSrKCpOy.js";import{C as p,a as h,b as u,c as y}from"./card-FPNRX1p2.js";import{B as n}from"./Button-RC9FN5z3.js";import{I as o}from"./Input-5gvkn2nv.js";import{E as S}from"./ExportButtons-Bm2TEI_V.js";import{A}from"./arrow-left-CvJq81LS.js";import"./createLucideIcon-CyiEew_u.js";import"./shield-x-gOy17OJ-.js";import"./x-YL0zAneP.js";import"./user-cog-nVqfHm0b.js";import"./Dropdown-B_QkibTR.js";import"./transition-CufTvwOt.js";import"./loader-circle-D2tkCN5O.js";import"./refresh-cw-L3GUbwVE.js";import"./FlashMessages-bPB7K-Ql.js";function Q({auth:T,movements:a=[],filters:r={},pagination:s={}}){const[d,g]=i.useState(r.type||""),[l,j]=i.useState(r.from||""),[c,f]=i.useState(r.to||""),[x,v]=i.useState(r.reference||""),N=t=>{t.preventDefault(),m.get(route("pharmacy.stock.movements.index"),{type:d||void 0,from:l||void 0,to:c||void 0,reference:x||void 0},{preserveState:!0})};return e.jsxs(w,{header:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(n,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(k,{href:route("pharmacy.stock.index"),children:[e.jsx(A,{className:"h-4 w-4 mr-1"})," Stock"]})}),e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-white leading-tight",children:"Historique des mouvements de stock"})]}),children:[e.jsx(b,{title:"Mouvements de stock"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs(p,{className:"mb-6",children:[e.jsxs(h,{className:"flex flex-row items-center justify-between",children:[e.jsxs(u,{className:"flex items-center",children:[e.jsx(_,{className:"h-5 w-5 mr-2"}),"Filtres"]}),e.jsx(S,{pdfUrl:route("pharmacy.exports.movements.pdf",{from:l,to:c,type:d,reference:x}),excelUrl:route("pharmacy.exports.movements.excel",{from:l,to:c,type:d,reference:x}),disabled:!a.length})]}),e.jsx(y,{children:e.jsxs("form",{onSubmit:N,className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Type"}),e.jsxs("select",{className:"rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white",value:d,onChange:t=>g(t.target.value),children:[e.jsx("option",{value:"",children:"Tous"}),e.jsx("option",{value:"IN",children:"Entrée"}),e.jsx("option",{value:"OUT",children:"Sortie"}),e.jsx("option",{value:"ADJUSTMENT",children:"Ajustement"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Du"}),e.jsx(o,{type:"date",value:l,onChange:t=>j(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Au"}),e.jsx(o,{type:"date",value:c,onChange:t=>f(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Référence"}),e.jsx(o,{placeholder:"SALE-, PO-...",value:x,onChange:t=>v(t.target.value)})]}),e.jsx(n,{type:"submit",children:"Appliquer"})]})})]}),e.jsxs(p,{children:[e.jsx(h,{children:e.jsxs(u,{className:"flex items-center",children:[e.jsx(C,{className:"h-5 w-5 mr-2"}),"Mouvements (",s.total??a.length,")"]})}),e.jsxs(y,{children:[a.length===0?e.jsx("p",{className:"text-gray-500 py-8 text-center",children:"Aucun mouvement."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Produit"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Quantité"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Référence"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:a.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-white",children:t.created_at}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${t.type==="IN"?"bg-green-100 text-green-800 dark:bg-green-900/30":t.type==="OUT"?"bg-red-100 text-red-800 dark:bg-red-900/30":"bg-gray-100 text-gray-800 dark:bg-gray-700"}`,children:t.type})}),e.jsxs("td",{className:"px-4 py-2 text-sm",children:[t.product_name??"—"," ",t.product_code&&`(${t.product_code})`]}),e.jsx("td",{className:"px-4 py-2 text-sm text-right",children:t.quantity}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400",children:t.reference??"—"})]},t.id))})]})}),s.last_page>1&&e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",s.current_page," / ",s.last_page]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{variant:"outline",size:"sm",disabled:s.current_page<=1,onClick:()=>m.get(route("pharmacy.stock.movements.index"),{...r,page:s.current_page-1}),children:"Précédent"}),e.jsx(n,{variant:"outline",size:"sm",disabled:s.current_page>=s.last_page,onClick:()=>m.get(route("pharmacy.stock.movements.index"),{...r,page:s.current_page+1}),children:"Suivant"})]})]})]})]})]})})]})}export{Q as default};
