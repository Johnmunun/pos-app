import{u as q,r as m,c as P,j as e,n as L,H as ae,L as X,a as R,z as f}from"./app-BGTsh8B3.js";import{b as V,m as se,D as z,_ as te,K,ad as re,u as ce,A as le,c as de,C as ie,p as ne,a3 as xe,f as me,q as oe,r as he,M as ge,o as pe,P as Y,ae as ue}from"./AppLayout-B9W2Qjn-.js";import{C as w,a as C,b as S,c as D}from"./card-DzyZZsrB.js";import{B as h}from"./Button-Cm51LcKk.js";import{B as H}from"./badge-vyxm7s9H.js";import{S as je}from"./SupplierDrawer-z5Fb-s0N.js";import{D as ye}from"./Drawer-D_RvWb8n.js";import{I as T}from"./Input-LVtkliO7.js";import{L as E}from"./Label-CEns7YJb.js";import{L as G,C as fe}from"./loader-circle-CIdMfzjo.js";import{f as U}from"./currency-CAle3Gff.js";import{A as Ne}from"./arrow-left-BMPE_XAu.js";import{C as be}from"./x-Bqi0sytM.js";import{T as ve}from"./user-cog-CgPvrrVM.js";import"./createLucideIcon-B4miffV9.js";import"./shield-x-DRqpxde8.js";import"./Dropdown-DbeWMHj2.js";import"./transition-JR3jNvu7.js";import"./refresh-cw-CA0aJ90x.js";import"./FlashMessages-o0prhkl9.js";import"./textarea-Dc6vmaOE.js";function ke({isOpen:s,onClose:p,supplierId:u,supplierName:c,existingPrice:d=null,onSuccess:N=null,canManage:$=!1,routePrefix:F="pharmacy"}){const{shop:B}=q().props,g=B?.currency||"CDF",[M,b]=m.useState([]),[O,v]=m.useState(!1),[n,I]=m.useState(""),[r,k]=m.useState({supplier_id:"",product_id:"",normal_price:"",agreed_price:"",tax_rate:"0",effective_from:new Date().toISOString().split("T")[0]}),[l,j]=m.useState({}),[A,t]=m.useState(!1),[i,o]=m.useState(null);m.useEffect(()=>{s&&J()},[s]),m.useEffect(()=>{u&&k(a=>({...a,supplier_id:u}))},[u]),m.useEffect(()=>{d?(k({supplier_id:d.supplier_id||u,product_id:d.product_id||"",normal_price:d.normal_price?.toString()||"",agreed_price:d.agreed_price?.toString()||"",tax_rate:d.tax_rate?.toString()||"0",effective_from:d.effective_from||new Date().toISOString().split("T")[0]}),d.product_id&&o({id:d.product_id,name:d.product_name,code:d.product_code})):(k({supplier_id:u||"",product_id:"",normal_price:"",agreed_price:"",tax_rate:"0",effective_from:new Date().toISOString().split("T")[0]}),o(null)),j({})},[d,u,s]);const J=async()=>{v(!0);try{const a=await P.get(route(`${F}.products`),{params:{per_page:1e3}}),x=a.data?.products?.data||a.data?.products||[];b(Array.isArray(x)?x:[])}catch(a){console.error("Error loading products:",a),b([])}finally{v(!1)}},_=(a,x)=>{k(y=>({...y,[a]:x})),l[a]&&j(y=>({...y,[a]:null}))},Q=a=>{o(a),_("product_id",a.id)},Z=()=>{const a=parseFloat(r.agreed_price||r.normal_price)||0,x=parseFloat(r.tax_rate)||0;return(a*(1+x/100)).toFixed(2)},ee=async a=>{if(a.preventDefault(),!$){L.error("Vous n'avez pas la permission de gérer les prix fournisseur.");return}t(!0),j({});try{const x={supplier_id:r.supplier_id,product_id:r.product_id,normal_price:parseFloat(r.normal_price)||0,agreed_price:r.agreed_price?parseFloat(r.agreed_price):null,tax_rate:parseFloat(r.tax_rate)||0,effective_from:r.effective_from},y=await P.post(route(`${F}.suppliers.prices.store`),x);y.data.success?(L.success(y.data.message),p(),N&&N()):L.error(y.data.message||"Une erreur est survenue")}catch(x){x.response?.status===422&&x.response?.data?.errors?j(x.response.data.errors):L.error(x.response?.data?.message||"Une erreur est survenue")}finally{t(!1)}},W=M.filter(a=>a.name?.toLowerCase().includes(n.toLowerCase())||a.code?.toLowerCase().includes(n.toLowerCase()));return e.jsx(ye,{isOpen:s,onClose:p,title:`Définir un prix - ${c||"Fournisseur"}`,size:"lg",children:e.jsxs("form",{onSubmit:ee,className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-1 space-y-4 p-4 overflow-y-auto",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),"Produit ",e.jsx("span",{className:"text-red-500",children:"*"})]}),i?e.jsxs("div",{className:"p-3 bg-primary/10 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:i.name}),i.code&&e.jsx("p",{className:"text-sm text-gray-500",children:i.code})]}),!d&&e.jsx(h,{type:"button",variant:"ghost",size:"sm",onClick:()=>{o(null),_("product_id","")},children:"Changer"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(se,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(T,{placeholder:"Rechercher un produit...",value:n,onChange:a=>I(a.target.value),className:"pl-10"})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg divide-y",children:O?e.jsxs("div",{className:"p-4 text-center text-gray-500",children:[e.jsx(G,{className:"h-5 w-5 animate-spin mx-auto"}),"Chargement..."]}):W.length>0?W.slice(0,10).map(a=>e.jsxs("button",{type:"button",onClick:()=>Q(a),className:"w-full px-3 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx("p",{className:"font-medium",children:a.name}),a.code&&e.jsx("p",{className:"text-sm text-gray-500",children:a.code})]},a.id)):e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Aucun produit trouvé"})})]}),l.product_id&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:l.product_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(E,{htmlFor:"normal_price",className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),"Prix d'achat normal (",g,") ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(T,{id:"normal_price",type:"number",min:"0",step:"0.01",value:r.normal_price,onChange:a=>_("normal_price",a.target.value),placeholder:"0.00",className:l.normal_price?"border-red-500":""}),l.normal_price&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:l.normal_price})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(E,{htmlFor:"agreed_price",className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),"Prix convenu (",g,")"]}),e.jsx(T,{id:"agreed_price",type:"number",min:"0",step:"0.01",value:r.agreed_price,onChange:a=>_("agreed_price",a.target.value),placeholder:"0.00",className:l.agreed_price?"border-red-500":""}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Prix négocié avec ce fournisseur (prioritaire si défini)"}),l.agreed_price&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:l.agreed_price})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(E,{htmlFor:"tax_rate",className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"Taux de taxe (%)"]}),e.jsx(T,{id:"tax_rate",type:"number",min:"0",max:"100",step:"0.01",value:r.tax_rate,onChange:a=>_("tax_rate",a.target.value),placeholder:"0",className:l.tax_rate?"border-red-500":""}),l.tax_rate&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:l.tax_rate})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(E,{htmlFor:"effective_from",className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),"Date d'effet"]}),e.jsx(T,{id:"effective_from",type:"date",value:r.effective_from,onChange:a=>_("effective_from",a.target.value),className:l.effective_from?"border-red-500":""}),l.effective_from&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:l.effective_from})]}),(r.normal_price||r.agreed_price)&&e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(re,{className:"h-4 w-4"}),"Résumé"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Prix effectif HT:"}),e.jsxs("span",{className:"font-medium",children:[g," ",parseFloat(r.agreed_price||r.normal_price||0).toFixed(2)]}),e.jsxs("span",{className:"text-gray-500",children:["Taxe (",r.tax_rate,"%):"]}),e.jsxs("span",{className:"font-medium",children:[g," ",(parseFloat(r.agreed_price||r.normal_price||0)*parseFloat(r.tax_rate||0)/100).toFixed(2)]}),e.jsx("span",{className:"text-gray-500 font-medium",children:"Prix TTC:"}),e.jsxs("span",{className:"font-bold text-primary",children:[g," ",Z()]})]})]})]}),e.jsxs("div",{className:"border-t p-4 flex gap-3",children:[e.jsx(h,{type:"button",variant:"outline",onClick:p,className:"flex-1",disabled:A,children:"Annuler"}),e.jsx(h,{type:"submit",className:"flex-1",disabled:A||!$||!r.product_id,children:A?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"h-4 w-4 mr-2 animate-spin"}),"Traitement..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),"Enregistrer"]})})]})]})})}function Ve({supplier:s,supplierPrices:p=[],products:u=[],routePrefix:c="pharmacy"}){const{shop:d}=q().props,N=d?.currency||"CDF",{auth:$}=q().props,F=$?.permissions||[],[B,g]=m.useState(!1),[M,b]=m.useState(!1),[O,v]=m.useState(null),n=t=>F.includes("*")?!0:t.split("|").some(i=>F.includes(i)),I=async t=>{if(confirm("Supprimer ce prix fournisseur ?"))try{const i=await P.delete(route(`${c}.suppliers.prices.destroy`,t));i.data.success?(f.success("Prix supprimé avec succès"),R.reload()):f.error(i.data.message)}catch{f.error("Erreur lors de la suppression")}},r=()=>{v(null),b(!0)},k=t=>{v(t),b(!0)},l=async()=>{const t=s.status==="active"?"deactivate":"activate",i=s.status==="active"?`${c}.supplier.deactivate`:`${c}.supplier.activate`;if(!n(i)){f.error("Vous n'avez pas la permission pour cette action.");return}try{const o=await P.post(route(`${c}.suppliers.${t}`,s.id));o.data.success?(f.success(o.data.message),R.reload()):f.error(o.data.message)}catch{f.error("Une erreur est survenue.")}},j=t=>t==="active"?e.jsx(H,{className:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",children:"Actif"}):e.jsx(H,{className:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:"Inactif"}),A=t=>{const i={DRAFT:{class:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",label:"Brouillon"},CONFIRMED:{class:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",label:"Confirmé"},PARTIALLY_RECEIVED:{class:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",label:"Partiel"},RECEIVED:{class:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",label:"Reçu"},CANCELLED:{class:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",label:"Annulé"}},o=i[t]||i.DRAFT;return e.jsx(H,{className:o.class,children:o.label})};return e.jsxs(le,{header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-100 leading-tight",children:"Détails du Fournisseur"}),children:[e.jsx(ae,{title:s.name}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-5xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx(h,{variant:"outline",asChild:!0,className:"border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-700",children:e.jsxs(X,{href:route(`${c}.suppliers.index`),className:"inline-flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4"}),e.jsx("span",{children:"Retour à la liste"})]})}),e.jsxs("div",{className:"flex gap-2",children:[n(`${c}.supplier.edit`)&&e.jsxs(h,{onClick:()=>g(!0),className:"bg-amber-500 hover:bg-amber-600 text-white inline-flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx("span",{children:"Modifier"})]}),s.status==="active"&&n(`${c}.supplier.deactivate`)&&e.jsxs(h,{variant:"outline",onClick:l,className:"border-orange-300 dark:border-orange-600 text-orange-700 dark:text-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/20",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Désactiver"]}),s.status==="inactive"&&n(`${c}.supplier.activate`)&&e.jsxs(h,{variant:"outline",onClick:l,className:"border-green-300 dark:border-green-600 text-green-700 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Activer"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(w,{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsx(C,{children:e.jsxs(S,{className:"flex items-center justify-between text-gray-900 dark:text-white",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(ne,{className:"h-5 w-5 mr-2 text-amber-500"}),"Informations générales"]}),j(s.status)]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"h-16 w-16 flex-shrink-0 bg-amber-100 dark:bg-amber-900/30 rounded-full flex items-center justify-center",children:e.jsx(xe,{className:"h-8 w-8 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[s.total_orders," commande(s) au total"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-gray-200 dark:border-slate-700",children:[s.contact_person&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(me,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Contact"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.contact_person})]})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(oe,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Téléphone"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.phone})]})]}),s.email&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(he,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("a",{href:`mailto:${s.email}`,className:"text-sm font-medium text-amber-600 dark:text-amber-400 hover:underline",children:s.email})]})]}),s.address&&e.jsxs("div",{className:"flex items-start gap-3 md:col-span-2",children:[e.jsx(ge,{className:"h-5 w-5 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Adresse"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.address})]})]})]})]})]}),e.jsxs(w,{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsx(C,{children:e.jsxs(S,{className:"flex items-center text-gray-900 dark:text-white",children:[e.jsx(V,{className:"h-5 w-5 mr-2 text-blue-500"}),"Commandes récentes"]})}),e.jsx(D,{children:!s.recent_orders||s.recent_orders.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(pe,{className:"h-10 w-10 mx-auto text-gray-300 dark:text-gray-600 mb-2"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Aucune commande pour ce fournisseur."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-slate-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Référence"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Statut"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Montant"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-slate-700",children:s.recent_orders.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 dark:text-white",children:t.reference}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:t.created_at}),e.jsx("td",{className:"px-4 py-3 text-center",children:A(t.status)}),e.jsx("td",{className:"px-4 py-3 text-sm text-right font-medium text-gray-900 dark:text-white",children:Number(t.total_amount).toFixed(2)})]},t.id))})]})})})]}),e.jsxs(w,{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsx(C,{children:e.jsxs(S,{className:"flex items-center justify-between text-gray-900 dark:text-white",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(z,{className:"h-5 w-5 mr-2 text-green-500"}),"Prix négociés (",p.length,")"]}),n(`${c}.supplier.pricing.manage`)&&e.jsxs(h,{size:"sm",onClick:r,className:"bg-green-500 hover:bg-green-600 text-white",children:[e.jsx(Y,{className:"h-4 w-4 mr-1"}),"Ajouter"]})]})}),e.jsx(D,{children:p.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(z,{className:"h-10 w-10 mx-auto text-gray-300 dark:text-gray-600 mb-2"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Aucun prix négocié avec ce fournisseur."}),n(`${c}.supplier.pricing.manage`)&&e.jsxs(h,{size:"sm",variant:"outline",onClick:r,className:"mt-3",children:[e.jsx(Y,{className:"h-4 w-4 mr-1"}),"Définir un prix"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-slate-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Produit"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Prix normal"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Prix convenu"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"TTC"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-slate-700",children:p.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800",children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.product_name}),t.product_code&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.product_code})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-600 dark:text-gray-300",children:U(t.normal_price,N)}),e.jsx("td",{className:"px-4 py-3 text-sm text-right",children:t.agreed_price?e.jsx("span",{className:"font-medium text-green-600 dark:text-green-400",children:U(t.agreed_price,N)}):e.jsx("span",{className:"text-gray-400",children:"—"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-right font-semibold text-gray-900 dark:text-white",children:U(t.price_with_tax,N)}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("div",{className:"flex items-center justify-center gap-1",children:n(`${c}.supplier.pricing.manage`)&&e.jsxs(e.Fragment,{children:[e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>k(t),className:"h-8 w-8 p-0 text-gray-500 hover:text-blue-600",children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>I(t.id),className:"h-8 w-8 p-0 text-gray-500 hover:text-red-600",children:e.jsx(ve,{className:"h-4 w-4"})})]})})})]},t.id))})]})})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(w,{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsx(C,{children:e.jsx(S,{className:"text-gray-900 dark:text-white text-base",children:"Statistiques"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total commandes"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s.total_orders})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Statut"}),j(s.status)]})]})]}),e.jsxs(w,{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsx(C,{children:e.jsxs(S,{className:"flex items-center text-gray-900 dark:text-white text-base",children:[e.jsx(fe,{className:"h-4 w-4 mr-2 text-gray-400"}),"Historique"]})}),e.jsxs(D,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(K,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Créé le"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.created_at})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(K,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Modifié le"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.updated_at})]})]})]})]}),n(`${c}.purchases.manage`)&&e.jsxs(w,{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsx(C,{children:e.jsx(S,{className:"text-gray-900 dark:text-white text-base",children:"Actions rapides"})}),e.jsx(D,{children:e.jsx(h,{asChild:!0,className:"w-full bg-blue-500 hover:bg-blue-600 text-white",children:e.jsxs(X,{href:route(`${c}.purchases.create`),className:"inline-flex items-center justify-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),e.jsx("span",{children:"Nouvelle commande"})]})})})]})]})]})]})}),e.jsx(je,{isOpen:B,onClose:()=>g(!1),supplier:s,onSuccess:()=>R.reload(),canCreate:!1,canUpdate:n(`${c}.supplier.edit`),routePrefix:c}),e.jsx(ke,{isOpen:M,onClose:()=>{b(!1),v(null)},supplierId:s.id,supplierName:s.name,existingPrice:O,onSuccess:()=>R.reload(),canManage:n(`${c}.supplier.pricing.manage`),routePrefix:c})]})}export{Ve as default};
