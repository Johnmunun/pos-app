import{u as P,r as F,j as e,H as D,L as o,a as b}from"./app-Bu58nmqp.js";import{A as E,a2 as y,C as f,i as I,b as L,P as k,B as v,s as z,E as M,n as V}from"./AppLayout-PYzm33Di.js";import{C as d,c as x,a as H,b as O}from"./card-DoR82Obt.js";import{B as c}from"./Button-CJzVzbMf.js";import{I as g}from"./Input-B1xyFs7T.js";import{B as n}from"./badge-Dg1bczFZ.js";import{C as w,A as q}from"./loader-circle-BgO0_QPs.js";import{C as _}from"./x-BNg5u3GU.js";import{R as X}from"./refresh-cw-DMClxRp8.js";import"./createLucideIcon-D31lZ7X_.js";import"./shield-x-Be2eaKBY.js";import"./user-cog-DOLB-E56.js";import"./Dropdown-BckUvWPZ.js";import"./transition-Dwpb1-fu.js";import"./arrow-left-DSvgm0i3.js";import"./FlashMessages-Ce1oH_d3.js";function xe({transfers:p,shops:j,filters:l,stats:i}){const{auth:u}=P().props,C=u?.permissions||[],m=s=>u?.user?.type==="ROOT"?!0:C.includes(s),N=m("transfer.create"),T=m("transfer.view"),B=m("transfer.print"),[t,r]=F.useState({reference:l?.reference||"",status:l?.status||"",from_shop_id:l?.from_shop_id||"",to_shop_id:l?.to_shop_id||"",from:l?.from||"",to:l?.to||""}),A=s=>{s.preventDefault();const a={};Object.keys(t).forEach(h=>{t[h]&&(a[h]=t[h])}),b.get(route("pharmacy.transfers.index"),a)},R=()=>{r({reference:"",status:"",from_shop_id:"",to_shop_id:"",from:"",to:""}),b.get(route("pharmacy.transfers.index"))},S=s=>{switch(s){case"draft":return e.jsxs(n,{className:"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300",children:[e.jsx(w,{className:"h-3 w-3 mr-1"}),"Brouillon"]});case"validated":return e.jsxs(n,{className:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300",children:[e.jsx(_,{className:"h-3 w-3 mr-1"}),"Validé"]});case"cancelled":return e.jsxs(n,{className:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300",children:[e.jsx(f,{className:"h-3 w-3 mr-1"}),"Annulé"]});default:return e.jsx(n,{children:s})}};return e.jsxs(E,{header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-white leading-tight",children:"Transferts Inter-Magasins"}),N&&e.jsx(o,{href:route("pharmacy.transfers.create"),children:e.jsxs(c,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Nouveau Transfert"]})})]}),children:[e.jsx(D,{title:"Transferts Inter-Magasins"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(d,{className:"bg-white dark:bg-slate-800",children:e.jsx(x,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx(y,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.total})]})]})})}),e.jsx(d,{className:"bg-white dark:bg-slate-800",children:e.jsx(x,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center",children:e.jsx(w,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Brouillons"}),e.jsx("p",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:i.draft})]})]})})}),e.jsx(d,{className:"bg-white dark:bg-slate-800",children:e.jsx(x,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx(_,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Validés"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:i.validated})]})]})})}),e.jsx(d,{className:"bg-white dark:bg-slate-800",children:e.jsx(x,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx(f,{className:"h-5 w-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Annulés"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:i.cancelled})]})]})})})]}),e.jsx(d,{className:"bg-white dark:bg-slate-800",children:e.jsx(x,{className:"pt-4",children:e.jsxs("form",{onSubmit:A,className:"flex flex-wrap items-end gap-4",children:[e.jsxs("div",{className:"w-[150px]",children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 block",children:"Référence"}),e.jsx(g,{type:"text",placeholder:"TRF-...",value:t.reference,onChange:s=>r(a=>({...a,reference:s.target.value})),className:"h-9"})]}),e.jsxs("div",{className:"w-[130px]",children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 block",children:"Statut"}),e.jsxs("select",{value:t.status,onChange:s=>r(a=>({...a,status:s.target.value})),className:"w-full h-9 rounded-md border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-white text-sm px-2",children:[e.jsx("option",{value:"",children:"Tous"}),e.jsx("option",{value:"draft",children:"Brouillon"}),e.jsx("option",{value:"validated",children:"Validé"}),e.jsx("option",{value:"cancelled",children:"Annulé"})]})]}),e.jsxs("div",{className:"w-[180px]",children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 block",children:"Magasin source"}),e.jsxs("select",{value:t.from_shop_id,onChange:s=>r(a=>({...a,from_shop_id:s.target.value})),className:"w-full h-9 rounded-md border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-white text-sm px-2",children:[e.jsx("option",{value:"",children:"Tous"}),j.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"w-[180px]",children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 block",children:"Magasin destination"}),e.jsxs("select",{value:t.to_shop_id,onChange:s=>r(a=>({...a,to_shop_id:s.target.value})),className:"w-full h-9 rounded-md border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-white text-sm px-2",children:[e.jsx("option",{value:"",children:"Tous"}),j.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"w-[140px]",children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 block",children:"Date début"}),e.jsx(g,{type:"date",value:t.from,onChange:s=>r(a=>({...a,from:s.target.value})),className:"h-9"})]}),e.jsxs("div",{className:"w-[140px]",children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 block",children:"Date fin"}),e.jsx(g,{type:"date",value:t.to,onChange:s=>r(a=>({...a,to:s.target.value})),className:"h-9"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{type:"submit",size:"sm",className:"h-9",children:[e.jsx(I,{className:"h-4 w-4 mr-1"}),"Filtrer"]}),e.jsx(c,{type:"button",variant:"outline",size:"sm",className:"h-9",onClick:R,children:e.jsx(X,{className:"h-4 w-4"})})]})]})})}),e.jsxs(d,{className:"bg-white dark:bg-slate-800",children:[e.jsx(H,{children:e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5 text-blue-600"}),"Liste des Transferts"]})}),e.jsx(x,{children:p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(L,{className:"h-16 w-16 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Aucun transfert trouvé"}),N&&e.jsx(o,{href:route("pharmacy.transfers.create"),children:e.jsxs(c,{className:"mt-4",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Créer un transfert"]})})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-slate-700",children:[e.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Référence"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Source → Destination"}),e.jsx("th",{className:"text-center py-3 px-4 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Statut"}),e.jsx("th",{className:"text-center py-3 px-4 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Produits"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Date"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Créé par"}),e.jsx("th",{className:"text-center py-3 px-4 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-slate-700",children:p.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"font-mono font-medium text-blue-600 dark:text-blue-400",children:s.reference})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:s.from_shop_name})]}),e.jsx(q,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:s.to_shop_name})]})]})}),e.jsx("td",{className:"py-3 px-4 text-center",children:S(s.status)}),e.jsxs("td",{className:"py-3 px-4 text-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.total_items}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-1",children:["(",s.total_quantity," unités)"]})]}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-700 dark:text-gray-300",children:[e.jsx(z,{className:"h-4 w-4 text-gray-400"}),s.created_at_formatted]})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-700 dark:text-gray-300",children:s.created_by_name}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[T&&e.jsx(o,{href:route("pharmacy.transfers.show",s.id),children:e.jsx(c,{variant:"outline",size:"sm",children:e.jsx(M,{className:"h-4 w-4"})})}),B&&s.status==="validated"&&e.jsx("a",{href:route("pharmacy.transfers.pdf",s.id),target:"_blank",rel:"noreferrer",children:e.jsx(c,{variant:"outline",size:"sm",children:e.jsx(V,{className:"h-4 w-4"})})})]})})]},s.id))})]})})})]})]})})]})}export{xe as default};
