import{r as i,j as e,H as v,a as n,L as N}from"./app-B8F_Smya.js";import{A as w,l as _,$ as C}from"./AppLayout-Cyrikcek.js";import{C as g,a as y,b as p,c as h}from"./card-DwWU2KFG.js";import{B as o}from"./Button-BSACjJaD.js";import{I as m}from"./Input-DyZz_-qK.js";import{E as S}from"./ExportButtons-DzmE47PL.js";import{A}from"./arrow-left-uFeYT1yE.js";import"./createLucideIcon-NKf32Z79.js";import"./shield-x-CXAQmM6w.js";import"./x-Ce9nIuKt.js";import"./user-cog-Cgo5DVwg.js";import"./Dropdown-CXpnj_1U.js";import"./transition-L_iZ831R.js";import"./loader-circle-5vrT9r4x.js";import"./refresh-cw-BeeT9s1l.js";import"./FlashMessages-CHIUDfR7.js";function Q({auth:T,movements:s=[],filters:a={},pagination:r={}}){const[d,u]=i.useState(a.type||""),[l,b]=i.useState(a.from||""),[x,k]=i.useState(a.to||""),[c,j]=i.useState(a.reference||""),f=t=>{t.preventDefault(),n.get(route("pharmacy.stock.movements.index"),{type:d||void 0,from:l||void 0,to:x||void 0,reference:c||void 0},{preserveState:!0})};return e.jsxs(w,{header:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(o,{variant:"ghost",size:"sm",asChild:!0,className:"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 hover:text-gray-900 dark:hover:text-white",children:e.jsxs(N,{href:route("pharmacy.stock.index"),children:[e.jsx(A,{className:"h-4 w-4 mr-1"})," Stock"]})}),e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-white leading-tight",children:"Historique des mouvements de stock"})]}),children:[e.jsx(v,{title:"Mouvements de stock"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs(g,{className:"mb-6 bg-white dark:bg-slate-900 border-gray-200 dark:border-slate-700",children:[e.jsxs(y,{className:"flex flex-row items-center justify-between",children:[e.jsxs(p,{className:"flex items-center text-gray-900 dark:text-white",children:[e.jsx(_,{className:"h-5 w-5 mr-2"}),"Filtres"]}),e.jsx(S,{pdfUrl:route("pharmacy.exports.movements.pdf",{from:l,to:x,type:d,reference:c}),excelUrl:route("pharmacy.exports.movements.excel",{from:l,to:x,type:d,reference:c}),disabled:!s.length})]}),e.jsx(h,{children:e.jsxs("form",{onSubmit:f,className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Type"}),e.jsxs("select",{className:"w-full min-w-[140px] h-10 rounded-md border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 px-3 focus:ring-2 focus:ring-amber-500 focus:border-transparent",value:d,onChange:t=>u(t.target.value),children:[e.jsx("option",{value:"",children:"Tous"}),e.jsx("option",{value:"IN",children:"Entrée"}),e.jsx("option",{value:"OUT",children:"Sortie"}),e.jsx("option",{value:"ADJUSTMENT",children:"Ajustement"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Du"}),e.jsx(m,{type:"date",value:l,onChange:t=>b(t.target.value),className:"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Au"}),e.jsx(m,{type:"date",value:x,onChange:t=>k(t.target.value),className:"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Référence"}),e.jsx(m,{placeholder:"SALE-, PO-...",value:c,onChange:t=>j(t.target.value),className:"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-gray-100 placeholder:text-gray-500 dark:placeholder:text-gray-400"})]}),e.jsx(o,{type:"submit",children:"Appliquer"})]})})]}),e.jsxs(g,{className:"bg-white dark:bg-slate-900 border-gray-200 dark:border-slate-700",children:[e.jsx(y,{children:e.jsxs(p,{className:"flex items-center text-gray-900 dark:text-white",children:[e.jsx(C,{className:"h-5 w-5 mr-2"}),"Mouvements (",r.total??s.length,")"]})}),e.jsxs(h,{children:[s.length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 py-8 text-center",children:"Aucun mouvement."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Produit"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Quantité"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Référence"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-gray-200 dark:divide-gray-700",children:s.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800",children:[e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-100",children:t.created_at}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${t.type==="IN"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":t.type==="OUT"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:t.type})}),e.jsxs("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-100",children:[t.product_name??"—"," ",t.product_code&&`(${t.product_code})`]}),e.jsx("td",{className:"px-4 py-2 text-sm text-right text-gray-900 dark:text-gray-100",children:t.quantity}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400",children:t.reference??"—"})]},t.id))})]})}),r.last_page>1&&e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Page ",r.current_page," / ",r.last_page]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{variant:"outline",size:"sm",disabled:r.current_page<=1,onClick:()=>n.get(route("pharmacy.stock.movements.index"),{...a,page:r.current_page-1}),className:"border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300",children:"Précédent"}),e.jsx(o,{variant:"outline",size:"sm",disabled:r.current_page>=r.last_page,onClick:()=>n.get(route("pharmacy.stock.movements.index"),{...a,page:r.current_page+1}),className:"border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300",children:"Suivant"})]})]})]})]})]})})]})}export{Q as default};
