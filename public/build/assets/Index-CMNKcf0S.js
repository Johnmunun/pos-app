import{r as x,b,j as e,H as y,a as f}from"./app-BGTsh8B3.js";import{A as v,T as m,b as N,c as w,P as p}from"./AppLayout-B9W2Qjn-.js";import{D as k}from"./Drawer-D_RvWb8n.js";import{I as s,T as c}from"./TextInput-DyvywxwR.js";import{I as i}from"./InputError-Xa22iMzk.js";import{P as _}from"./PrimaryButton-BCXnKMHC.js";import{F as C}from"./FlashMessages-o0prhkl9.js";import{S as D}from"./sweetalert2.esm.all-BQxta0Da.js";import{T as A}from"./user-cog-CgPvrrVM.js";import"./createLucideIcon-B4miffV9.js";import"./shield-x-DRqpxde8.js";import"./x-Bqi0sytM.js";import"./Dropdown-DbeWMHj2.js";import"./transition-JR3jNvu7.js";import"./arrow-left-BMPE_XAu.js";import"./loader-circle-CIdMfzjo.js";import"./refresh-cw-CA0aJ90x.js";function Q({categories:l}){const[g,d]=x.useState(!1),[a,n]=x.useState(null),r=b({name:"",slug:"",description:"",parent_id:"",sort_order:0,is_active:!0}),o=(t=null)=>{n(t),t?r.setData({name:t.name,slug:t.slug,description:t.description||"",parent_id:t.parent_id||"",sort_order:t.sort_order||0,is_active:t.is_active}):(r.reset(),r.setData("is_active",!0)),d(!0)},u=t=>{t.preventDefault(),a?r.put(route("categories.update",a.id),{onSuccess:()=>{d(!1),r.reset(),n(null)}}):r.post(route("categories.store"),{onSuccess:()=>{d(!1),r.reset()}})},h=t=>{D.fire({title:"Êtes-vous sûr ?",text:"Cette action est irréversible !",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"}).then(j=>{j.isConfirmed&&f.delete(route("categories.destroy",t))})};return l.filter(t=>!t.parent_id),e.jsxs(v,{header:e.jsxs("div",{className:"flex flex-row justify-between items-center gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold leading-tight text-gray-900 dark:text-white",children:"Catégories de produits"}),e.jsxs("button",{onClick:()=>o(),className:"inline-flex items-center gap-2 px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg transition-colors shadow-sm hover:shadow-md whitespace-nowrap",children:[e.jsx(p,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Ajouter une catégorie"}),e.jsx("span",{className:"sm:hidden",children:"Ajouter"})]})]}),children:[e.jsx(y,{title:"Catégories"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsx(C,{}),l.length>0?e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Nom"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Parent"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Produits"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Ordre"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Statut"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:l.map(t=>e.jsxs("tr",{className:t.parent_id?"bg-gray-50 dark:bg-gray-900/50":"",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[t.parent_id&&e.jsx("span",{className:"text-gray-400",children:"└─"}),e.jsx(m,{className:"h-4 w-4 text-amber-600 dark:text-amber-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t.parent_name||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(N,{className:"h-4 w-4"}),t.products_count]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t.sort_order}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.is_active?e.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 rounded text-xs",children:"Active"}):e.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-400 rounded text-xs",children:"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>o(t),className:"text-amber-600 hover:text-amber-700 dark:text-amber-400 dark:hover:text-amber-300",title:"Modifier",children:e.jsx(w,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>h(t.id),className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",title:"Supprimer",children:e.jsx(A,{className:"h-4 w-4"})})]})})]},t.id))})]})})}):e.jsxs("div",{className:"text-center py-16 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx(m,{className:"mx-auto h-16 w-16 text-gray-400 dark:text-gray-500 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Aucune catégorie"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Créez votre première catégorie pour organiser vos produits."}),e.jsxs("button",{onClick:()=>o(),className:"inline-flex items-center gap-2 px-6 py-3 bg-amber-600 hover:bg-amber-700 text-white rounded-lg transition-colors shadow-sm hover:shadow-md",children:[e.jsx(p,{className:"h-5 w-5"}),"Créer une catégorie"]})]})]})}),e.jsx(k,{isOpen:g,onClose:()=>{d(!1),r.reset(),n(null)},title:a?"Modifier la catégorie":"Ajouter une catégorie",size:"md",children:e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(s,{htmlFor:"name",value:"Nom"}),e.jsx(c,{id:"name",type:"text",value:r.data.name,onChange:t=>r.setData("name",t.target.value),className:"mt-1 block w-full",placeholder:"Nom de la catégorie",required:!0}),e.jsx(i,{message:r.errors.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"slug",value:"Slug (optionnel)"}),e.jsx(c,{id:"slug",type:"text",value:r.data.slug,onChange:t=>r.setData("slug",t.target.value),className:"mt-1 block w-full",placeholder:"Auto-généré si vide"}),e.jsx(i,{message:r.errors.slug,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"description",value:"Description"}),e.jsx("textarea",{id:"description",value:r.data.description,onChange:t=>r.setData("description",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-amber-500 focus:ring-amber-500",rows:"3",placeholder:"Description de la catégorie"}),e.jsx(i,{message:r.errors.description,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"parent_id",value:"Catégorie parente (optionnel)"}),e.jsxs("select",{id:"parent_id",value:r.data.parent_id,onChange:t=>r.setData("parent_id",t.target.value||null),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-amber-500 focus:ring-amber-500",children:[e.jsx("option",{value:"",children:"Aucune (catégorie racine)"}),l.filter(t=>!a||t.id!==a.id).map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx(i,{message:r.errors.parent_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"sort_order",value:"Ordre d'affichage"}),e.jsx(c,{id:"sort_order",type:"number",min:"0",value:r.data.sort_order,onChange:t=>r.setData("sort_order",parseInt(t.target.value)||0),className:"mt-1 block w-full"}),e.jsx(i,{message:r.errors.sort_order,className:"mt-2"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"is_active",type:"checkbox",checked:r.data.is_active,onChange:t=>r.setData("is_active",t.target.checked),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600"}),e.jsx(s,{htmlFor:"is_active",value:"Catégorie active",className:"ml-2"})]}),e.jsx(i,{message:r.errors.is_active,className:"mt-2"}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{d(!1),r.reset(),n(null)},className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Annuler"}),e.jsx(_,{disabled:r.processing,children:a?"Modifier":"Ajouter"})]})]})})]})}export{Q as default};
