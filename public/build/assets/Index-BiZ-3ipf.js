import{u as k,r as c,j as e,H as w,a as C,n as S}from"./app-B8F_Smya.js";import{A,y as o,P as j,r as D,B}from"./AppLayout-Cyrikcek.js";import{B as n}from"./Button-BSACjJaD.js";import{I as x}from"./Input-DyZz_-qK.js";import{L as m}from"./Label-Dhk_jhe5.js";import{B as f}from"./badge-CezgjasG.js";import{M as E}from"./Modal-DDeTHNuf.js";import"./createLucideIcon-NKf32Z79.js";import"./shield-x-CXAQmM6w.js";import"./x-Ce9nIuKt.js";import"./user-cog-Cgo5DVwg.js";import"./Dropdown-CXpnj_1U.js";import"./transition-L_iZ831R.js";import"./arrow-left-uFeYT1yE.js";import"./loader-circle-5vrT9r4x.js";import"./refresh-cw-BeeT9s1l.js";import"./FlashMessages-CHIUDfR7.js";function Q({depots:p=[]}){const{auth:h}=k().props,N=h?.permissions||[],u=(s=>h?.user?.type==="ROOT"||N.includes(s))("pharmacy.seller.create"),[b,t]=c.useState(!1),[d,l]=c.useState({name:"",code:"",address:"",city:""}),[r,g]=c.useState({}),[i,y]=c.useState(!1),v=s=>{s.preventDefault(),y(!0),g({}),C.post(route("pharmacy.depots.store"),d,{preserveScroll:!0,onSuccess:()=>{S.success("Dépôt créé avec succès"),t(!1),l({name:"",code:"",address:"",city:""})},onError:a=>g(a||{}),onFinish:()=>y(!1)})};return e.jsxs(A,{header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(o,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"}),e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-white leading-tight",children:"Dépôts"})]}),u&&e.jsxs(n,{onClick:()=>t(!0),className:"gap-2",children:[e.jsx(j,{className:"h-4 w-4"}),"Nouveau dépôt"]})]}),children:[e.jsx(w,{title:"Dépôts"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Sélectionnez un dépôt dans la barre de navigation pour accéder aux produits et au stock. Les vendeurs peuvent être affectés à un ou plusieurs dépôts."}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:p.length===0?e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(o,{className:"h-12 w-12 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-600 dark:text-gray-300 mb-2",children:"Aucun dépôt"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Un dépôt par défaut a été créé pour votre tenant. Vous pouvez en ajouter d'autres."}),u&&e.jsxs(n,{onClick:()=>t(!0),className:"gap-2",children:[e.jsx(j,{className:"h-4 w-4"}),"Créer un dépôt"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Dépôt"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Adresse"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Statut"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:p.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/30",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center",children:e.jsx(o,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s.name})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:e.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded",children:s.code})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:s.address||s.city?e.jsx("span",{className:"flex items-center gap-1",children:(s.address||s.city)&&e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"h-3 w-3 shrink-0"}),[s.address,s.city].filter(Boolean).join(", ")]})}):"—"}),e.jsx("td",{className:"px-6 py-4",children:s.is_active?e.jsx(f,{className:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/50 dark:text-emerald-300",children:"Actif"}):e.jsx(f,{variant:"secondary",children:"Inactif"})})]},s.id))})]})})})]})}),e.jsx(E,{show:b,onClose:()=>!i&&t(!1),maxWidth:"md",children:e.jsxs("form",{onSubmit:v,className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5"}),"Nouveau dépôt"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"name",children:"Nom *"}),e.jsx(x,{id:"name",value:d.name,onChange:s=>l(a=>({...a,name:s.target.value})),placeholder:"Ex: Dépôt principal",required:!0,className:r.name?"border-red-500":""}),r.name&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:r.name})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"code",children:"Code *"}),e.jsx(x,{id:"code",value:d.code,onChange:s=>l(a=>({...a,code:s.target.value.toUpperCase().replace(/\s/g,"-")})),placeholder:"Ex: DEPOT-1",required:!0,className:r.code?"border-red-500":""}),r.code&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:r.code})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"address",children:"Adresse"}),e.jsx(x,{id:"address",value:d.address,onChange:s=>l(a=>({...a,address:s.target.value})),placeholder:"Adresse complète"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"city",children:"Ville"}),e.jsx(x,{id:"city",value:d.city,onChange:s=>l(a=>({...a,city:s.target.value})),placeholder:"Ville"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:i,children:"Annuler"}),e.jsx(n,{type:"submit",disabled:i,children:i?"Création...":"Créer le dépôt"})]})]})})]})}export{Q as default};
