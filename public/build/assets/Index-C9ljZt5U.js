import{u as re,r as o,j as e,a as M,n as v,H as de,L as le,c as ne}from"./app-B8F_Smya.js";import{f as $,M as te,L as J,y as Y,A as ie,a4 as ce,m as oe,P as Z,c as me}from"./AppLayout-Cyrikcek.js";import{B as j}from"./Button-BSACjJaD.js";import{I as S}from"./Input-DyZz_-qK.js";import{B as C}from"./badge-CezgjasG.js";import{D as xe}from"./Drawer-Ch-0G5k5.js";import{L as f}from"./Label-Dhk_jhe5.js";import{C as K,X as ee,U as se}from"./x-Ce9nIuKt.js";import{S as H,a as ae,T as he}from"./user-cog-Cgo5DVwg.js";import{M as pe}from"./Modal-DDeTHNuf.js";import{R as B}from"./refresh-cw-BeeT9s1l.js";import"./createLucideIcon-NKf32Z79.js";import"./shield-x-CXAQmM6w.js";import"./Dropdown-CXpnj_1U.js";import"./transition-L_iZ831R.js";import"./arrow-left-uFeYT1yE.js";import"./loader-circle-5vrT9r4x.js";import"./FlashMessages-CHIUDfR7.js";function ue({seller:d=null,availableRoles:R=[],availableDepots:z=[],open:y,onClose:P,onSuccess:A}){const{auth:T}=re().props,N=T?.tenantSector||"pharmacy",h=!!d,q={pharmacy:"Pharmacie",butchery:"Boucherie",kiosk:"Kiosque",supermarket:"Supermarché",hardware:"Quincaillerie"}[N]||N,[p,c]=o.useState({first_name:"",last_name:"",email:"",password:"",password_confirmation:"",role_ids:[],depot_ids:[],is_active:!0}),[t,k]=o.useState({}),[w,F]=o.useState(!1),[m,L]=o.useState([]),[u,b]=o.useState([]),[E,_]=o.useState("");o.useEffect(()=>{d?(c({first_name:d.name?.split(" ")[0]||"",last_name:d.name?.split(" ").slice(1).join(" ")||"",email:d.email||"",password:"",password_confirmation:"",role_ids:d.roles?.map(s=>s.id)||[],depot_ids:d.depot_ids||d.depots?.map(s=>s.id)||[],is_active:d.status==="active"}),L(d.roles||[]),b(d.depots||[])):(c({first_name:"",last_name:"",email:"",password:"",password_confirmation:"",role_ids:[],depot_ids:[],is_active:!0}),L([]),b([])),k({}),_("")},[d,y]);const g=(s,l)=>{c(r=>({...r,[s]:l})),t[s]&&k(r=>({...r,[s]:null}))},D=s=>{const l=u.some(n=>n.id===s.id);let r;l?r=u.filter(n=>n.id!==s.id):r=[...u,s],b(r),c(n=>({...n,depot_ids:r.map(x=>x.id)}))},I=s=>{const l=m.some(n=>n.id===s.id);let r;l?r=m.filter(n=>n.id!==s.id):r=[...m,s],L(r),c(n=>({...n,role_ids:r.map(x=>x.id)}))},O=async s=>{s.preventDefault(),F(!0),k({});const l={...p,role_ids:m.map(x=>x.id),depot_ids:u.map(x=>x.id)},r=h?route("pharmacy.sellers.update",d.id):route("pharmacy.sellers.store");M[h?"put":"post"](r,l,{preserveScroll:!0,onSuccess:()=>{P(),A&&A()},onError:x=>{k(x||{}),Object.values(x||{}).flat().forEach(G=>v.error(G))},onFinish:()=>{F(!1)}})},V=R.filter(s=>s.name.toLowerCase().includes(E.toLowerCase())||s.description?.toLowerCase().includes(E.toLowerCase()));return e.jsx(xe,{isOpen:y,onClose:P,title:h?"Modifier le vendeur":"Nouveau vendeur",children:e.jsxs("form",{onSubmit:O,className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-1 space-y-4 p-4 overflow-y-auto",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(f,{htmlFor:"first_name",className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"}),"Prénom ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(S,{id:"first_name",value:p.first_name,onChange:s=>g("first_name",s.target.value),placeholder:"Prénom du vendeur",className:t.first_name?"border-red-500":"",required:!0}),t.first_name&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:t.first_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(f,{htmlFor:"last_name",className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"}),"Nom ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(S,{id:"last_name",value:p.last_name,onChange:s=>g("last_name",s.target.value),placeholder:"Nom du vendeur",className:t.last_name?"border-red-500":"",required:!0}),t.last_name&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:t.last_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(f,{htmlFor:"email",className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(S,{id:"email",type:"email",value:p.email,onChange:s=>g("email",s.target.value),placeholder:"email@example.com",className:t.email?"border-red-500":"",required:!0}),t.email&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:t.email})]}),!h&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(f,{htmlFor:"password",className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),"Mot de passe ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(S,{id:"password",type:"password",value:p.password,onChange:s=>g("password",s.target.value),placeholder:"Minimum 8 caractères",className:t.password?"border-red-500":"",required:!h,minLength:8}),t.password&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:t.password})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(f,{htmlFor:"password_confirmation",className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),"Confirmer le mot de passe ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(S,{id:"password_confirmation",type:"password",value:p.password_confirmation,onChange:s=>g("password_confirmation",s.target.value),placeholder:"Confirmer le mot de passe",className:t.password_confirmation?"border-red-500":"",required:!h}),t.password_confirmation&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:t.password_confirmation})]})]}),z.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),"Affecter aux dépôts"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Le vendeur pourra accéder aux produits des dépôts sélectionnés."}),e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3 max-h-40 overflow-y-auto bg-gray-50 dark:bg-gray-900/50",children:e.jsx("div",{className:"space-y-2",children:z.map(s=>{const l=u.some(r=>r.id===s.id);return e.jsx("div",{onClick:()=>D(s),className:`p-3 rounded-lg border cursor-pointer transition-colors ${l?"border-amber-500 bg-amber-50 dark:bg-amber-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[l?e.jsx(K,{className:"h-4 w-4 text-amber-600 dark:text-amber-400 shrink-0"}):e.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-gray-300 dark:border-gray-600 shrink-0"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:s.name}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",s.code,")"]})]})},s.id)})})}),u.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:u.map(s=>e.jsxs(C,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(Y,{className:"h-3 w-3"}),s.name,e.jsx("button",{type:"button",onClick:()=>D(s),className:"ml-1 hover:text-red-600",children:e.jsx(ee,{className:"h-3 w-3"})})]},s.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),"Assigner un rôle"]}),R.length===0?e.jsxs("div",{className:"rounded-lg border border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-900/20 p-3 text-sm text-amber-800 dark:text-amber-200",children:[e.jsx("p",{className:"font-medium mb-1",children:"Aucun rôle disponible."}),e.jsxs("p",{className:"text-xs opacity-90",children:["Des rôles système (ex. « Vendeur Pharmacie ») peuvent être créés par l’administrateur une fois ; ils apparaîtront ici pour tous les propriétaires. Sinon, créez un rôle dans ",e.jsx("strong",{children:"Admin → Gestion des accès → Rôles"})," avec des permissions ",q," uniquement."]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium mb-2",children:"Cliquez sur un rôle pour l’assigner (récliquez pour retirer)."}),e.jsx(S,{type:"text",placeholder:"Rechercher un rôle...",value:E,onChange:s=>_(s.target.value),className:"mb-2"}),e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3 max-h-64 overflow-y-auto bg-gray-50 dark:bg-gray-900/50",children:V.length===0?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:"Aucun rôle trouvé avec cette recherche"}):e.jsx("div",{className:"space-y-2",children:V.map(s=>{const l=m.some(r=>r.id===s.id);return e.jsx("div",{onClick:()=>I(s),className:`p-3 rounded-lg border cursor-pointer transition-colors ${l?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l?e.jsx(K,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}):e.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-gray-300 dark:border-gray-600"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:s.name})]}),s.description&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 ml-6",children:s.description}),e.jsxs("div",{className:"mt-2 ml-6 flex items-center gap-2 flex-wrap",children:[s.is_global&&e.jsx(C,{variant:"secondary",className:"text-xs",children:"Rôle système"}),e.jsxs(C,{variant:"outline",className:"text-xs",children:[s.permissions_count||0," permission",s.permissions_count!==1?"s":""]})]})]})})},s.id)})})})]}),m.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Rôles sélectionnés (",m.length,")"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(s=>e.jsxs(C,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(H,{className:"h-3 w-3"}),s.name,e.jsx("button",{type:"button",onClick:()=>I(s),className:"ml-1 hover:text-red-600 dark:hover:text-red-400",children:e.jsx(ee,{className:"h-3 w-3"})})]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{className:"flex items-center gap-2",children:"Statut"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"status",value:"active",checked:p.is_active,onChange:()=>g("is_active",!0),className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Actif"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"status",value:"pending",checked:!p.is_active,onChange:()=>g("is_active",!1),className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"En attente"})]})]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 flex gap-3 justify-end",children:[e.jsx(j,{type:"button",variant:"outline",onClick:P,disabled:w,children:"Annuler"}),e.jsx(j,{type:"submit",disabled:w,className:"gap-2",children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),h?"Mise à jour...":"Création..."]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"h-4 w-4"}),h?"Mettre à jour":"Créer le vendeur"]})})]})]})})}function ze({sellers:d=[],availableRoles:R=[],availableDepots:z=[],stats:y={},allPermissions:P={}}){const{auth:A}=re().props,T=A?.permissions||[],N=a=>A?.user?.type==="ROOT"?!0:T.includes(a),h=N("pharmacy.seller.create"),U=N("pharmacy.seller.edit"),q=N("pharmacy.seller.delete");N("pharmacy.seller.view");const p=U,[c,t]=o.useState(""),[k,w]=o.useState(!1),[F,m]=o.useState(null),[L,u]=o.useState(null),[b,E]=o.useState(null),[_,g]=o.useState(null),D=()=>{M.get(route("pharmacy.sellers.index"),{search:c},{preserveState:!0,preserveScroll:!0})},I=a=>{a.key==="Enter"&&D()},O=()=>{m(null),w(!0)},V=a=>{m(a),w(!0)},s=()=>{w(!1),m(null)},l=()=>{M.reload({only:["sellers"]})},r=a=>{if(!p){v.error("Vous n'avez pas la permission d'impersonner des vendeurs.");return}g(a)},n=()=>{b||g(null)},x=async()=>{if(!_)return;const a=_;E(a.id);try{const i=await ne.post(route("pharmacy.sellers.impersonate",a.id),{},{headers:{Accept:"application/json"}});v.success("Impersonation démarrée avec succès"),g(null),M.visit(i.data?.redirect||route("pharmacy.sales.index"))}catch(i){v.error(i.response?.data?.message||i.response?.data?.errors?.error?.[0]||"Erreur lors de l'impersonation"),E(null)}},W=async a=>{if(confirm(`Êtes-vous sûr de vouloir désactiver le vendeur "${a.name}" ?`)){if(!q){v.error("Vous n'avez pas la permission de supprimer des vendeurs.");return}u(a.id);try{await M.delete(route("pharmacy.sellers.destroy",a.id),{preserveScroll:!0,onSuccess:()=>{v.success("Vendeur désactivé avec succès")},onError:()=>{v.error("Erreur lors de la désactivation")},onFinish:()=>u(null)})}catch{v.error("Erreur lors de la suppression"),u(null)}}},G=a=>{const X={active:{label:"Actif",color:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/50 dark:text-emerald-300"},pending:{label:"En attente",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},blocked:{label:"Bloqué",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"}}[a]||{label:a,color:"bg-gray-100 text-gray-800"};return e.jsx(C,{className:X.color,children:X.label})},Q=d.filter(a=>{if(!c)return!0;const i=c.toLowerCase();return a.name.toLowerCase().includes(i)||a.email.toLowerCase().includes(i)});return e.jsxs(ie,{header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"}),e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-white leading-tight",children:"Gestion des Vendeurs"})]})}),h&&e.jsxs(j,{onClick:O,className:"gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),"Ajouter un vendeur"]})]}),children:[e.jsx(de,{title:"Gestion des Vendeurs"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[R.length===0&&e.jsxs("div",{className:"mb-4 rounded-lg border border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-900/20 p-3 flex items-start gap-2 text-sm text-amber-800 dark:text-amber-200",children:[e.jsx(ce,{className:"h-5 w-5 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Aucun rôle à assigner pour l’instant."}),e.jsxs("p",{className:"text-xs mt-1 opacity-90",children:["L’administrateur peut créer des rôles système (ex. « Vendeur Pharmacie ») une fois ; ils seront visibles ici pour tous. Sinon, créez des rôles pour votre boutique avec des permissions de votre secteur.",N("access.roles.view")||A?.user?.type==="ROOT"?e.jsxs(e.Fragment,{children:[" ",e.jsx(le,{href:route("admin.access.roles"),className:"underline font-medium",children:"Admin → Rôles"})]}):" Demandez à l’administrateur d’exécuter le seeder des rôles par défaut."]})]})]}),y&&Object.keys(y).length>0&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total"}),e.jsx("div",{className:"mt-1 text-2xl font-bold text-gray-900 dark:text-white",children:y.total??0})]}),e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 rounded-lg p-4 border border-emerald-200 dark:border-emerald-800",children:[e.jsx("div",{className:"text-sm font-medium text-emerald-700 dark:text-emerald-400",children:"Actifs"}),e.jsx("div",{className:"mt-1 text-2xl font-bold text-emerald-900 dark:text-emerald-300",children:y.active??0})]}),e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-4 border border-amber-200 dark:border-amber-800",children:[e.jsx("div",{className:"text-sm font-medium text-amber-700 dark:text-amber-400",children:"En attente"}),e.jsx("div",{className:"mt-1 text-2xl font-bold text-amber-900 dark:text-amber-300",children:y.pending??0})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 border border-red-200 dark:border-red-800",children:[e.jsx("div",{className:"text-sm font-medium text-red-700 dark:text-red-400",children:"Bloqués"}),e.jsx("div",{className:"mt-1 text-2xl font-bold text-red-900 dark:text-red-300",children:y.blocked??0})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(oe,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(S,{type:"text",placeholder:"Rechercher un vendeur...",value:c,onChange:a=>t(a.target.value),onKeyPress:I,className:"pl-10"})]}),e.jsx(j,{onClick:D,variant:"outline",children:"Rechercher"}),e.jsx(j,{onClick:()=>M.reload({only:["sellers"]}),variant:"outline",size:"icon",children:e.jsx(B,{className:"h-4 w-4"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:Q.length===0?e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(se,{className:"h-12 w-12 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-600 dark:text-gray-300 mb-2",children:c?"Aucun vendeur trouvé":"Aucun vendeur"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:c?"Essayez avec d'autres termes de recherche":"Commencez par créer votre premier vendeur"}),h&&!c&&e.jsxs(j,{onClick:O,className:"gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),"Ajouter un vendeur"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Vendeur"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Rôles"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Statut"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Ventes"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Date de création"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:Q.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center",children:e.jsx($,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:a.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[e.jsx(te,{className:"h-3 w-3"}),a.email]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[a.roles&&a.roles.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:a.roles.map(i=>e.jsxs(C,{variant:"outline",className:"text-xs",children:[e.jsx(H,{className:"h-3 w-3 mr-1"}),i.name]},i.id))}):e.jsx("span",{className:"text-sm text-gray-400 italic",children:"Aucun rôle assigné"}),a.depots&&a.depots.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:a.depots.map(i=>e.jsx(C,{variant:"secondary",className:"text-xs",children:i.name},i.id))})]})}),e.jsx("td",{className:"px-6 py-4",children:G(a.status)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:a.sales_count??0}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:a.created_at||"—"}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[p&&a.status==="active"&&e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>r(a),disabled:b===a.id,title:"Se connecter comme ce vendeur",className:"text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300",children:b===a.id?e.jsx(B,{className:"h-4 w-4 animate-spin"}):e.jsx(ae,{className:"h-4 w-4"})}),U&&e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>V(a),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300",children:e.jsx(me,{className:"h-4 w-4"})}),q&&a.status!=="blocked"&&e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>W(a),disabled:L===a.id,className:"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300",children:L===a.id?e.jsx(B,{className:"h-4 w-4 animate-spin"}):e.jsx(he,{className:"h-4 w-4"})})]})})]},a.id))})]})})})]})}),k&&e.jsx(ue,{seller:F,availableRoles:R,availableDepots:z,open:k,onClose:s,onSuccess:l}),e.jsx(pe,{show:!!_,onClose:n,maxWidth:"sm",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-amber-100 dark:bg-amber-900/30",children:e.jsx(ae,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Confirmation d'impersonation"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["Vous allez vous connecter comme ",e.jsx("strong",{className:"text-gray-900 dark:text-white",children:_?.name}),". Continuer ?"]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx(j,{variant:"outline",onClick:n,disabled:!!b,children:"Annuler"}),e.jsx(j,{onClick:x,disabled:!!b,className:"bg-amber-600 hover:bg-amber-700 text-white",children:b?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"h-4 w-4 mr-2 animate-spin"}),"Connexion…"]}):"Continuer"})]})]})})]})}export{ze as default};
