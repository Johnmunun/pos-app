import{r as n,j as e,H as N,a as m,L as w}from"./app-BGTsh8B3.js";import{A as _,l as C,a1 as S}from"./AppLayout-B9W2Qjn-.js";import{C as y,a as p,b as h,c as u}from"./card-DzyZZsrB.js";import{B as o}from"./Button-Cm51LcKk.js";import{I as g}from"./Input-LVtkliO7.js";import{E as A}from"./ExportButtons-WFClV4Fz.js";import{A as T}from"./arrow-left-BMPE_XAu.js";import"./createLucideIcon-B4miffV9.js";import"./shield-x-DRqpxde8.js";import"./x-Bqi0sytM.js";import"./user-cog-CgPvrrVM.js";import"./Dropdown-DbeWMHj2.js";import"./transition-JR3jNvu7.js";import"./loader-circle-CIdMfzjo.js";import"./refresh-cw-CA0aJ90x.js";import"./FlashMessages-o0prhkl9.js";function K({auth:$,movements:d=[],filters:a={},pagination:r={},routePrefix:s="pharmacy"}){const[l,b]=n.useState(a.type||""),[x,k]=n.useState(a.from||""),[c,j]=n.useState(a.to||""),[i,v]=n.useState(a.reference||""),f=t=>{t.preventDefault(),m.get(route(`${s}.stock.movements.index`),{type:l||void 0,from:x||void 0,to:c||void 0,reference:i||void 0},{preserveState:!0})};return e.jsxs(_,{header:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(o,{variant:"ghost",size:"sm",asChild:!0,className:"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 hover:text-gray-900 dark:hover:text-white",children:e.jsxs(w,{href:route(`${s}.stock.index`),children:[e.jsx(T,{className:"h-4 w-4 mr-1"})," Stock"]})}),e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-white leading-tight",children:"Historique des mouvements de stock"})]}),children:[e.jsx(N,{title:"Mouvements de stock"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs(y,{className:"mb-6 bg-white dark:bg-slate-900 border-gray-200 dark:border-slate-700",children:[e.jsxs(p,{className:"flex flex-row items-center justify-between",children:[e.jsxs(h,{className:"flex items-center text-gray-900 dark:text-white",children:[e.jsx(C,{className:"h-5 w-5 mr-2"}),"Filtres"]}),e.jsx(A,{pdfUrl:route(`${s}.exports.movements.pdf`,{from:x,to:c,type:l,reference:i}),excelUrl:route(`${s}.exports.movements.excel`,{from:x,to:c,type:l,reference:i}),disabled:!d.length})]}),e.jsx(u,{children:e.jsxs("form",{onSubmit:f,className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Type"}),e.jsxs("select",{className:"w-full sm:min-w-[140px] h-10 rounded-md border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100 px-3 focus:ring-2 focus:ring-amber-500 focus:border-transparent",value:l,onChange:t=>b(t.target.value),children:[e.jsx("option",{value:"",children:"Tous"}),e.jsx("option",{value:"IN",children:"Entrée"}),e.jsx("option",{value:"OUT",children:"Sortie"}),e.jsx("option",{value:"ADJUSTMENT",children:"Ajustement"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Du"}),e.jsx(g,{type:"date",value:x,onChange:t=>k(t.target.value),className:"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Au"}),e.jsx(g,{type:"date",value:c,onChange:t=>j(t.target.value),className:"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Référence"}),e.jsx(g,{placeholder:"SALE-, PO-...",value:i,onChange:t=>v(t.target.value),className:"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-gray-100 placeholder:text-gray-500 dark:placeholder:text-gray-400"})]}),e.jsx(o,{type:"submit",children:"Appliquer"})]})})]}),e.jsxs(y,{className:"bg-white dark:bg-slate-900 border-gray-200 dark:border-slate-700",children:[e.jsx(p,{children:e.jsxs(h,{className:"flex items-center text-gray-900 dark:text-white",children:[e.jsx(S,{className:"h-5 w-5 mr-2"}),"Mouvements (",r.total??d.length,")"]})}),e.jsxs(u,{children:[d.length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 py-8 text-center",children:"Aucun mouvement."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Produit"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Quantité"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Référence"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-gray-200 dark:divide-gray-700",children:d.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800",children:[e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-100",children:t.created_at}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${t.type==="IN"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":t.type==="OUT"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:t.type})}),e.jsxs("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-100",children:[t.product_name??"—"," ",t.product_code&&`(${t.product_code})`]}),e.jsx("td",{className:"px-4 py-2 text-sm text-right text-gray-900 dark:text-gray-100",children:t.quantity}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400",children:t.reference??"—"})]},t.id))})]})}),r.last_page>1&&e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Page ",r.current_page," / ",r.last_page]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{variant:"outline",size:"sm",disabled:r.current_page<=1,onClick:()=>m.get(route(`${s}.stock.movements.index`),{...a,page:r.current_page-1}),className:"border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300",children:"Précédent"}),e.jsx(o,{variant:"outline",size:"sm",disabled:r.current_page>=r.last_page,onClick:()=>m.get(route(`${s}.stock.movements.index`),{...a,page:r.current_page+1}),className:"border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300",children:"Suivant"})]})]})]})]})]})})]})}export{K as default};
