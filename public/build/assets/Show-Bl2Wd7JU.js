import{u as N,j as e,H as f,L as k,c as v,n as x}from"./app-DtqU_Gmt.js";import{A as w,R as _,C as c,t as m,y as C,f as g,D as A,b as l}from"./AppLayout-C4K4I5xd.js";import{B as o}from"./Button-4k-pObky.js";import{B as i}from"./badge-BBdevRdg.js";import{f as D}from"./currency-CAle3Gff.js";import{A as B}from"./arrow-left-BGTcItEv.js";import{C as h}from"./x-Cw-ZD_Fb.js";import"./createLucideIcon-BH-qXF_i.js";import"./shield-x-Cz4kXV9c.js";import"./user-cog-BQwjoD4w.js";import"./Dropdown--z3bvfF1.js";import"./transition-DbHxI3Hw.js";import"./loader-circle-DtoZnQ6b.js";import"./refresh-cw-CcjnuCLI.js";import"./FlashMessages-D-g4FpAa.js";import"./utils-CDN07tui.js";function G({auth:L,sale:r,lines:d=[],customer:s,routePrefix:n="pharmacy"}){const{shop:y}=N().props,p=r.currency||y?.currency||"CDF",b=r.status==="DRAFT",u=()=>{confirm("Annuler cette vente (brouillon) ?")&&v.post(route(`${n}.sales.cancel`,r.id)).then(()=>{x.success("Vente annulée"),window.location.reload()}).catch(a=>x.error(a.response?.data?.message||"Erreur lors de l'annulation"))},j=a=>{switch(a){case"COMPLETED":return e.jsxs(i,{className:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300",children:[e.jsx(h,{className:"h-3 w-3 mr-1"}),"Terminée"]});case"CANCELLED":return e.jsxs(i,{className:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300",children:[e.jsx(c,{className:"h-3 w-3 mr-1"}),"Annulée"]});default:return e.jsxs(i,{className:"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300",children:[e.jsx(m,{className:"h-3 w-3 mr-1"}),"Brouillon"]})}},t=a=>D(a,p);return e.jsxs(w,{children:[e.jsx(f,{title:`Vente ${r.id.slice(0,8)}`}),e.jsxs("div",{className:"container mx-auto py-6 px-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(o,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(k,{href:route(`${n}.sales.index`),children:[e.jsx(B,{className:"h-4 w-4 mr-1"}),"Retour"]})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2 text-gray-900 dark:text-gray-100",children:[e.jsx(_,{className:"h-6 w-6"}),"Vente #",r.id.slice(0,8)]})}),j(r.status)]}),b&&e.jsxs(o,{variant:"destructive",size:"sm",onClick:u,children:[e.jsx(c,{className:"h-4 w-4 mr-1"}),"Annuler la vente"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[e.jsx(m,{className:"h-5 w-5 text-gray-500"}),"Détails de la vente"]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"h-10 w-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(C,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Date création"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:r.created_at})]})]}),r.seller_name&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"h-10 w-10 bg-amber-100 dark:bg-amber-900/30 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(g,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Vendeur"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:r.seller_name})]})]}),r.completed_at&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"h-10 w-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(h,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Date finalisation"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:r.completed_at})]})]}),s&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"h-10 w-10 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(g,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Client"}),e.jsxs("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:[s.full_name||s.name,s.phone&&e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-2",children:["(",s.phone,")"]})]})]})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5 text-gray-500"}),"Résumé financier"]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700/30 rounded-lg",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total"}),e.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:t(Number(r.total_amount))})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx("span",{className:"text-green-700 dark:text-green-300",children:"Montant payé"}),e.jsx("span",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:t(Number(r.paid_amount))})]}),e.jsxs("div",{className:`flex justify-between items-center p-3 rounded-lg ${Number(r.balance_amount)>0?"bg-amber-50 dark:bg-amber-900/20":"bg-gray-50 dark:bg-gray-700/30"}`,children:[e.jsx("span",{className:Number(r.balance_amount)>0?"text-amber-700 dark:text-amber-300":"text-gray-600 dark:text-gray-300",children:"Solde restant"}),e.jsx("span",{className:`text-lg font-semibold ${Number(r.balance_amount)>0?"text-amber-600 dark:text-amber-400":"text-gray-600 dark:text-gray-400"}`,children:t(Number(r.balance_amount))})]})]})]}),e.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[e.jsx(l,{className:"h-5 w-5 text-gray-500"}),"Articles (",d.length,")"]})}),d.length===0?e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(l,{className:"h-12 w-12 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Aucun article dans cette vente"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Produit"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Quantité"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Prix unitaire"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:d.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center",children:e.jsx(l,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"})}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:a.product_name})]})}),e.jsx("td",{className:"px-6 py-4 text-right text-gray-900 dark:text-gray-100",children:a.quantity}),e.jsx("td",{className:"px-6 py-4 text-right text-gray-600 dark:text-gray-300",children:t(Number(a.unit_price))}),e.jsx("td",{className:"px-6 py-4 text-right font-medium text-gray-900 dark:text-gray-100",children:t(Number(a.line_total))})]},a.id))}),e.jsx("tfoot",{className:"bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:"3",className:"px-6 py-4 text-right font-semibold text-gray-700 dark:text-gray-200",children:"Total"}),e.jsx("td",{className:"px-6 py-4 text-right font-bold text-gray-900 dark:text-gray-100",children:t(Number(r.total_amount))})]})})]})})]})]})]})]})}export{G as default};
