import{u as V,r as x,c as L,j as e,n as T,H as ee,L as W,a as E,z as y}from"./app-DZtTOeIE.js";import{b as q,h as ae,D as R,I as se,n as $,Y as te,o as re,A as ce,c as le,C as ie,x as de,O as ne,f as xe,i as me,M as oe,l as he,m as pe,P as X,Z as ge}from"./AppLayout-Bwi93PbD.js";import{C as k,a as _,b as w,c as C}from"./card-vlabImcc.js";import{B as o}from"./Button-BTh3B2Uw.js";import{B as H}from"./badge-BDQ0rHun.js";import{S as ue}from"./SupplierDrawer-DNMuA8UP.js";import{D as je}from"./Drawer-DwT_q8h7.js";import{I as P}from"./Input--MgEb_Nf.js";import{L as F}from"./Label-CgyD4LXG.js";import{L as Z,C as ye}from"./loader-circle-DAnXRmQH.js";import{f as U}from"./currency-C0RJmSMb.js";import{A as fe}from"./arrow-left-B06KhL06.js";import{C as Ne}from"./x-CXs6YGQp.js";import{T as be}from"./user-cog-HidSeQFU.js";import"./createLucideIcon-CC-qNPM4.js";import"./shield-x-BMsLrHBM.js";import"./Dropdown-BcljNwe3.js";import"./transition-DLc2G3IG.js";import"./refresh-cw-BgZ2dbVR.js";import"./FlashMessages-DVzYx1sH.js";import"./textarea-JCPRrjpX.js";function ve({isOpen:s,onClose:p,supplierId:g,supplierName:z,existingPrice:l=null,onSuccess:A=null,canManage:S=!1}){const{shop:B}=V().props,h=B?.currency||"CDF",[O,f]=x.useState([]),[I,N]=x.useState(!1),[d,M]=x.useState(""),[r,b]=x.useState({supplier_id:"",product_id:"",normal_price:"",agreed_price:"",tax_rate:"0",effective_from:new Date().toISOString().split("T")[0]}),[c,u]=x.useState({}),[D,t]=x.useState(!1),[i,m]=x.useState(null);x.useEffect(()=>{s&&G()},[s]),x.useEffect(()=>{g&&b(a=>({...a,supplier_id:g}))},[g]),x.useEffect(()=>{l?(b({supplier_id:l.supplier_id||g,product_id:l.product_id||"",normal_price:l.normal_price?.toString()||"",agreed_price:l.agreed_price?.toString()||"",tax_rate:l.tax_rate?.toString()||"0",effective_from:l.effective_from||new Date().toISOString().split("T")[0]}),l.product_id&&m({id:l.product_id,name:l.product_name,code:l.product_code})):(b({supplier_id:g||"",product_id:"",normal_price:"",agreed_price:"",tax_rate:"0",effective_from:new Date().toISOString().split("T")[0]}),m(null)),u({})},[l,g,s]);const G=async()=>{N(!0);try{const a=await L.get(route("pharmacy.products"),{params:{per_page:1e3}}),n=a.data?.products?.data||a.data?.products||[];f(Array.isArray(n)?n:[])}catch(a){console.error("Error loading products:",a),f([])}finally{N(!1)}},v=(a,n)=>{b(j=>({...j,[a]:n})),c[a]&&u(j=>({...j,[a]:null}))},J=a=>{m(a),v("product_id",a.id)},K=()=>{const a=parseFloat(r.agreed_price||r.normal_price)||0,n=parseFloat(r.tax_rate)||0;return(a*(1+n/100)).toFixed(2)},Q=async a=>{if(a.preventDefault(),!S){T.error("Vous n'avez pas la permission de gérer les prix fournisseur.");return}t(!0),u({});try{const n={supplier_id:r.supplier_id,product_id:r.product_id,normal_price:parseFloat(r.normal_price)||0,agreed_price:r.agreed_price?parseFloat(r.agreed_price):null,tax_rate:parseFloat(r.tax_rate)||0,effective_from:r.effective_from},j=await L.post(route("pharmacy.suppliers.prices.store"),n);j.data.success?(T.success(j.data.message),p(),A&&A()):T.error(j.data.message||"Une erreur est survenue")}catch(n){n.response?.status===422&&n.response?.data?.errors?u(n.response.data.errors):T.error(n.response?.data?.message||"Une erreur est survenue")}finally{t(!1)}},Y=O.filter(a=>a.name?.toLowerCase().includes(d.toLowerCase())||a.code?.toLowerCase().includes(d.toLowerCase()));return e.jsx(je,{isOpen:s,onClose:p,title:`Définir un prix - ${z||"Fournisseur"}`,size:"lg",children:e.jsxs("form",{onSubmit:Q,className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-1 space-y-4 p-4 overflow-y-auto",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),"Produit ",e.jsx("span",{className:"text-red-500",children:"*"})]}),i?e.jsxs("div",{className:"p-3 bg-primary/10 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:i.name}),i.code&&e.jsx("p",{className:"text-sm text-gray-500",children:i.code})]}),!l&&e.jsx(o,{type:"button",variant:"ghost",size:"sm",onClick:()=>{m(null),v("product_id","")},children:"Changer"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ae,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(P,{placeholder:"Rechercher un produit...",value:d,onChange:a=>M(a.target.value),className:"pl-10"})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg divide-y",children:I?e.jsxs("div",{className:"p-4 text-center text-gray-500",children:[e.jsx(Z,{className:"h-5 w-5 animate-spin mx-auto"}),"Chargement..."]}):Y.length>0?Y.slice(0,10).map(a=>e.jsxs("button",{type:"button",onClick:()=>J(a),className:"w-full px-3 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx("p",{className:"font-medium",children:a.name}),a.code&&e.jsx("p",{className:"text-sm text-gray-500",children:a.code})]},a.id)):e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Aucun produit trouvé"})})]}),c.product_id&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:c.product_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(F,{htmlFor:"normal_price",className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),"Prix d'achat normal (",h,") ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(P,{id:"normal_price",type:"number",min:"0",step:"0.01",value:r.normal_price,onChange:a=>v("normal_price",a.target.value),placeholder:"0.00",className:c.normal_price?"border-red-500":""}),c.normal_price&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:c.normal_price})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(F,{htmlFor:"agreed_price",className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),"Prix convenu (",h,")"]}),e.jsx(P,{id:"agreed_price",type:"number",min:"0",step:"0.01",value:r.agreed_price,onChange:a=>v("agreed_price",a.target.value),placeholder:"0.00",className:c.agreed_price?"border-red-500":""}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Prix négocié avec ce fournisseur (prioritaire si défini)"}),c.agreed_price&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:c.agreed_price})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(F,{htmlFor:"tax_rate",className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),"Taux de taxe (%)"]}),e.jsx(P,{id:"tax_rate",type:"number",min:"0",max:"100",step:"0.01",value:r.tax_rate,onChange:a=>v("tax_rate",a.target.value),placeholder:"0",className:c.tax_rate?"border-red-500":""}),c.tax_rate&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:c.tax_rate})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(F,{htmlFor:"effective_from",className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"}),"Date d'effet"]}),e.jsx(P,{id:"effective_from",type:"date",value:r.effective_from,onChange:a=>v("effective_from",a.target.value),className:c.effective_from?"border-red-500":""}),c.effective_from&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:c.effective_from})]}),(r.normal_price||r.agreed_price)&&e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(te,{className:"h-4 w-4"}),"Résumé"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Prix effectif HT:"}),e.jsxs("span",{className:"font-medium",children:[h," ",parseFloat(r.agreed_price||r.normal_price||0).toFixed(2)]}),e.jsxs("span",{className:"text-gray-500",children:["Taxe (",r.tax_rate,"%):"]}),e.jsxs("span",{className:"font-medium",children:[h," ",(parseFloat(r.agreed_price||r.normal_price||0)*parseFloat(r.tax_rate||0)/100).toFixed(2)]}),e.jsx("span",{className:"text-gray-500 font-medium",children:"Prix TTC:"}),e.jsxs("span",{className:"font-bold text-primary",children:[h," ",K()]})]})]})]}),e.jsxs("div",{className:"border-t p-4 flex gap-3",children:[e.jsx(o,{type:"button",variant:"outline",onClick:p,className:"flex-1",disabled:D,children:"Annuler"}),e.jsx(o,{type:"submit",className:"flex-1",disabled:D||!S||!r.product_id,children:D?e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Traitement..."]}):e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Enregistrer"]})})]})]})})}function qe({supplier:s,supplierPrices:p=[],products:g=[]}){const{shop:z}=V().props,l=z?.currency||"CDF",{auth:A}=V().props,S=A?.permissions||[],[B,h]=x.useState(!1),[O,f]=x.useState(!1),[I,N]=x.useState(null),d=t=>S.includes("*")?!0:t.split("|").some(i=>S.includes(i)),M=async t=>{if(confirm("Supprimer ce prix fournisseur ?"))try{const i=await L.delete(route("pharmacy.suppliers.prices.destroy",t));i.data.success?(y.success("Prix supprimé avec succès"),E.reload()):y.error(i.data.message)}catch{y.error("Erreur lors de la suppression")}},r=()=>{N(null),f(!0)},b=t=>{N(t),f(!0)},c=async()=>{const t=s.status==="active"?"deactivate":"activate",i=s.status==="active"?"pharmacy.supplier.deactivate":"pharmacy.supplier.activate";if(!d(i)){y.error("Vous n'avez pas la permission pour cette action.");return}try{const m=await L.post(route(`pharmacy.suppliers.${t}`,s.id));m.data.success?(y.success(m.data.message),E.reload()):y.error(m.data.message)}catch{y.error("Une erreur est survenue.")}},u=t=>t==="active"?e.jsx(H,{className:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",children:"Actif"}):e.jsx(H,{className:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:"Inactif"}),D=t=>{const i={DRAFT:{class:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",label:"Brouillon"},CONFIRMED:{class:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",label:"Confirmé"},PARTIALLY_RECEIVED:{class:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",label:"Partiel"},RECEIVED:{class:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",label:"Reçu"},CANCELLED:{class:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",label:"Annulé"}},m=i[t]||i.DRAFT;return e.jsx(H,{className:m.class,children:m.label})};return e.jsxs(ce,{header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-100 leading-tight",children:"Détails du Fournisseur"}),children:[e.jsx(ee,{title:s.name}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-5xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx(o,{variant:"outline",asChild:!0,className:"border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-700",children:e.jsxs(W,{href:route("pharmacy.suppliers.index"),className:"inline-flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsx("span",{children:"Retour à la liste"})]})}),e.jsxs("div",{className:"flex gap-2",children:[d("pharmacy.supplier.edit")&&e.jsxs(o,{onClick:()=>h(!0),className:"bg-amber-500 hover:bg-amber-600 text-white inline-flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx("span",{children:"Modifier"})]}),s.status==="active"&&d("pharmacy.supplier.deactivate")&&e.jsxs(o,{variant:"outline",onClick:c,className:"border-orange-300 dark:border-orange-600 text-orange-700 dark:text-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/20",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Désactiver"]}),s.status==="inactive"&&d("pharmacy.supplier.activate")&&e.jsxs(o,{variant:"outline",onClick:c,className:"border-green-300 dark:border-green-600 text-green-700 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20",children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Activer"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(k,{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsx(_,{children:e.jsxs(w,{className:"flex items-center justify-between text-gray-900 dark:text-white",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(de,{className:"h-5 w-5 mr-2 text-amber-500"}),"Informations générales"]}),u(s.status)]})}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"h-16 w-16 flex-shrink-0 bg-amber-100 dark:bg-amber-900/30 rounded-full flex items-center justify-center",children:e.jsx(ne,{className:"h-8 w-8 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[s.total_orders," commande(s) au total"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-gray-200 dark:border-slate-700",children:[s.contact_person&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xe,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Contact"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.contact_person})]})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(me,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Téléphone"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.phone})]})]}),s.email&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(oe,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("a",{href:`mailto:${s.email}`,className:"text-sm font-medium text-amber-600 dark:text-amber-400 hover:underline",children:s.email})]})]}),s.address&&e.jsxs("div",{className:"flex items-start gap-3 md:col-span-2",children:[e.jsx(he,{className:"h-5 w-5 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Adresse"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.address})]})]})]})]})]}),e.jsxs(k,{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsx(_,{children:e.jsxs(w,{className:"flex items-center text-gray-900 dark:text-white",children:[e.jsx(q,{className:"h-5 w-5 mr-2 text-blue-500"}),"Commandes récentes"]})}),e.jsx(C,{children:!s.recent_orders||s.recent_orders.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(pe,{className:"h-10 w-10 mx-auto text-gray-300 dark:text-gray-600 mb-2"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Aucune commande pour ce fournisseur."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-slate-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Référence"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Statut"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Montant"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-slate-700",children:s.recent_orders.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 dark:text-white",children:t.reference}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:t.created_at}),e.jsx("td",{className:"px-4 py-3 text-center",children:D(t.status)}),e.jsx("td",{className:"px-4 py-3 text-sm text-right font-medium text-gray-900 dark:text-white",children:Number(t.total_amount).toFixed(2)})]},t.id))})]})})})]}),e.jsxs(k,{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsx(_,{children:e.jsxs(w,{className:"flex items-center justify-between text-gray-900 dark:text-white",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(R,{className:"h-5 w-5 mr-2 text-green-500"}),"Prix négociés (",p.length,")"]}),d("pharmacy.supplier.pricing.manage")&&e.jsxs(o,{size:"sm",onClick:r,className:"bg-green-500 hover:bg-green-600 text-white",children:[e.jsx(X,{className:"h-4 w-4 mr-1"}),"Ajouter"]})]})}),e.jsx(C,{children:p.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(R,{className:"h-10 w-10 mx-auto text-gray-300 dark:text-gray-600 mb-2"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Aucun prix négocié avec ce fournisseur."}),d("pharmacy.supplier.pricing.manage")&&e.jsxs(o,{size:"sm",variant:"outline",onClick:r,className:"mt-3",children:[e.jsx(X,{className:"h-4 w-4 mr-1"}),"Définir un prix"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-slate-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Produit"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Prix normal"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Prix convenu"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"TTC"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-slate-700",children:p.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800",children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.product_name}),t.product_code&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.product_code})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-600 dark:text-gray-300",children:U(t.normal_price,l)}),e.jsx("td",{className:"px-4 py-3 text-sm text-right",children:t.agreed_price?e.jsx("span",{className:"font-medium text-green-600 dark:text-green-400",children:U(t.agreed_price,l)}):e.jsx("span",{className:"text-gray-400",children:"—"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-right font-semibold text-gray-900 dark:text-white",children:U(t.price_with_tax,l)}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("div",{className:"flex items-center justify-center gap-1",children:d("pharmacy.supplier.pricing.manage")&&e.jsxs(e.Fragment,{children:[e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>b(t),className:"h-8 w-8 p-0 text-gray-500 hover:text-blue-600",children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>M(t.id),className:"h-8 w-8 p-0 text-gray-500 hover:text-red-600",children:e.jsx(be,{className:"h-4 w-4"})})]})})})]},t.id))})]})})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(k,{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsx(_,{children:e.jsx(w,{className:"text-gray-900 dark:text-white text-base",children:"Statistiques"})}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total commandes"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s.total_orders})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Statut"}),u(s.status)]})]})]}),e.jsxs(k,{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsx(_,{children:e.jsxs(w,{className:"flex items-center text-gray-900 dark:text-white text-base",children:[e.jsx(ye,{className:"h-4 w-4 mr-2 text-gray-400"}),"Historique"]})}),e.jsxs(C,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Créé le"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.created_at})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Modifié le"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.updated_at})]})]})]})]}),d("pharmacy.purchases.manage")&&e.jsxs(k,{className:"bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700",children:[e.jsx(_,{children:e.jsx(w,{className:"text-gray-900 dark:text-white text-base",children:"Actions rapides"})}),e.jsx(C,{children:e.jsx(o,{asChild:!0,className:"w-full bg-blue-500 hover:bg-blue-600 text-white",children:e.jsxs(W,{href:route("pharmacy.purchases.create"),className:"inline-flex items-center justify-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{children:"Nouvelle commande"})]})})})]})]})]})]})}),e.jsx(ue,{isOpen:B,onClose:()=>h(!1),supplier:s,onSuccess:()=>E.reload(),canCreate:!1,canUpdate:d("pharmacy.supplier.edit")}),e.jsx(ve,{isOpen:O,onClose:()=>{f(!1),N(null)},supplierId:s.id,supplierName:s.name,existingPrice:I,onSuccess:()=>E.reload(),canManage:d("pharmacy.supplier.pricing.manage")})]})}export{qe as default};
